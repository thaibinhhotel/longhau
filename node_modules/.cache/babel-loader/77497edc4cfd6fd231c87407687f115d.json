{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Button,Form,Header,Image,Label,Modal,Input}from'semantic-ui-react';import Moment from'moment';import momentLocalizer from'react-widgets-moment';import DateTimePicker from'react-widgets/lib/DateTimePicker';import'react-widgets/dist/css/react-widgets.css';import{ListOption}from'../components/ListOption';import'semantic-ui-css/semantic.min.css';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'../App.css';Moment.locale('vn');momentLocalizer();function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}var isMobile={Android:function Android(){return navigator.userAgent.match(/Android/i);},BlackBerry:function BlackBerry(){return navigator.userAgent.match(/BlackBerry/i);},iOS:function iOS(){return navigator.userAgent.match(/iPhone|iPad|iPod/i);},Opera:function Opera(){return navigator.userAgent.match(/Opera Mini/i);},Windows:function Windows(){return navigator.userAgent.match(/IEMobile/i);},any:function any(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows();}};export var RoomDetailCheckout=/*#__PURE__*/function(_React$Component){_inherits(RoomDetailCheckout,_React$Component);function RoomDetailCheckout(props){var _this;_classCallCheck(this,RoomDetailCheckout);_this=_possibleConstructorReturn(this,_getPrototypeOf(RoomDetailCheckout).call(this,props));_this.state={open:false,CheckinTimeSelected:_this.props.roominfo.fromTime?new Date(_this.props.roominfo.fromTime.replace(/[A-Za-z]/g,' ')):new Date(),roomCurrentClass:_this.props.roominfo.roomCurrentClass?_this.props.roominfo.roomCurrentClass:'',optionListSelected:_this.props.roominfo.moreOptionId?JSON.parse(_this.props.roominfo.moreOptionId):'',roomDetailOpen:false,isSubmiting:false,CheckinDate:_this.props.roominfo.fromTime?_this.props.roominfo.fromTime.substr(0,10):new Date().getFullYear()+\"-\"+(new Date().getMonth()+1)+\"-\"+new Date().getDate(),CheckinTime:_this.props.roominfo.fromTime?_this.props.roominfo.fromTime.substr(11,5):new Date().getHours()+\":\"+new Date().getMinutes()};['checkinRoomSubmit','getStatusDes','onChangePickedTime','handleChangeTypeIDSelect','handleChangeOption','handleShowModal','handleHideModal','handleChangeInputDate','handleChangeInputTime'].forEach(function(method){return _this[method]=_this[method].bind(_assertThisInitialized(_this));});return _this;}_createClass(RoomDetailCheckout,[{key:\"checkinRoomSubmit\",value:function(){var _checkinRoomSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var action,roomId,id,checkinTime,roomClass,options,totalOptionPrice,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.setState({isSubmiting:true});case 2:action='checkin';roomId=this.props.roominfo.roomid;id=this.props.roominfo.id;checkinTime='';if(isMobile.iOS()){checkinTime=this.state.CheckinDate+\" \"+this.state.CheckinTime;console.log(checkinTime);}else{checkinTime=this.state.CheckinTimeSelected;}roomClass=this.state.roomCurrentClass;options=JSON.stringify(this.state.optionListSelected);totalOptionPrice=0;for(i=0;i<this.state.optionListSelected.length;i++){totalOptionPrice=totalOptionPrice+this.state.optionListSelected[i].total;}if(checkinTime){_context.next=15;break;}toast.error('Bạn chưa chọn giờ vào!');this.setState({isSubmiting:false});return _context.abrupt(\"return\");case 15:if(roomClass){_context.next=19;break;}toast.error('Bạn chưa chọn loại phòng!');this.setState({isSubmiting:false});return _context.abrupt(\"return\");case 19:_context.next=21;return this.props.UpdateCheckInRoom(id,checkinTime,roomClass,options,totalOptionPrice,roomId);case 21:_context.next=23;return this.setState({roomDetailOpen:false,isSubmiting:false});case 23:case\"end\":return _context.stop();}}},_callee,this);}));function checkinRoomSubmit(){return _checkinRoomSubmit.apply(this,arguments);}return checkinRoomSubmit;}()},{key:\"getStatusDes\",value:function getStatusDes(){var status=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var stt=this.props.statusList;for(var i=0;i<stt.length;i++){if(stt[i].key==status){return stt[i].text;}}}},{key:\"onChangePickedTime\",value:function onChangePickedTime(val){this.setState({CheckinTimeSelected:val});}},{key:\"handleChangeTypeIDSelect\",value:function handleChangeTypeIDSelect(event){var val=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(val==null)return;this.setState({roomCurrentClass:val['value']});}},{key:\"handleChangeOption\",value:function handleChangeOption(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.setState({optionListSelected:data});}},{key:\"handleShowModal\",value:function handleShowModal(){this.setState({roomDetailOpen:true});}},{key:\"handleHideModal\",value:function handleHideModal(){this.setState({roomDetailOpen:false});}},{key:\"handleChangeInputDate\",value:function handleChangeInputDate(val,data){this.setState({CheckinDate:data.value});}},{key:\"handleChangeInputTime\",value:function handleChangeInputTime(val,data){this.setState({CheckinTime:data.value});}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,roominfo=_this$props.roominfo,roomTypeOther=_this$props.roomTypeOther;var imgsrc=roominfo.roomid?'images/room'+roominfo.roomid+'.png':'images/room101.png';var CheckinDate=this.state.CheckinDate;var CheckinTime=this.state.CheckinTime;// console.log(this.state.CheckinTimeSelected);\n// console.log(this.props.roominfo);\n// if (isMobile.iOS() && roominfo.fromtime) {}\nreturn React.createElement(Modal,{style:{width:'100%'},open:this.state.roomDetailOpen,closeIcon:true,onClose:function onClose(){_this2.setState({roomDetailOpen:false});},trigger:React.createElement(\"a\",{className:\"image fit\"},React.createElement(\"img\",{style:{boxShadow:'10px 10px 5px #ccc'},onClick:this.handleShowModal,src:\"images/hotelico.jpeg\",alt:\"Hotel\"}))},React.createElement(Modal.Header,null,\"Room Detail\"),React.createElement(Modal.Content,{image:true,scrolling:true,style:{height:'450%'}},React.createElement(Image,{size:\"medium\",src:imgsrc,wrapped:true}),React.createElement(Modal.Description,{style:{width:'100%'}},React.createElement(Header,null,roominfo.roomDescription),React.createElement(\"b\",null,\"Status: \",this.getStatusDes(roominfo.status)),React.createElement(\"hr\",null),React.createElement(\"label\",null,React.createElement(\"b\",null,\"Checkin:\")),React.createElement(\"div\",null,!isMobile.iOS()?React.createElement(DateTimePicker,{value:this.state.CheckinTimeSelected,onChange:this.onChangePickedTime}):React.createElement(\"div\",{style:{width:'100%'}},React.createElement(Input,{style:{width:'50%'},onChange:this.handleChangeInputDate,value:CheckinDate,type:\"date\",name:\"CheckinDate\"}),React.createElement(Input,{style:{width:'50%'},onChange:this.handleChangeInputTime,value:CheckinTime,type:\"time\",name:\"CheckinTime\"}))),React.createElement(\"hr\",null),React.createElement(\"div\",null,React.createElement(\"label\",null,React.createElement(\"b\",null,\"Room Type:\")),React.createElement(Form.Select,{fluid:true,icon:\"\"// label='Room Type:'\n,value:this.state.roomCurrentClass,options:roomTypeOther,onChange:this.handleChangeTypeIDSelect,placeholder:\"Type\"})),React.createElement(\"hr\",null),React.createElement(Label,{as:\"a\",color:\"teal\",ribbon:true},\"Th\\xEAm S\\u1EA3n Ph\\u1EA9m:\"),React.createElement(ListOption,{listoptionIds:this.props.listoptionIds,listoption:this.props.listoption,onChangeOption:this.handleChangeOption,optionListSelected:this.state.optionListSelected?this.state.optionListSelected:[]}))),React.createElement(Modal.Actions,null,React.createElement(Button,{primary:true,onClick:this.checkinRoomSubmit,disabled:this.state.isSubmiting},\"CheckIn\"),React.createElement(Button,{primary:true,onClick:this.handleHideModal,disabled:this.state.isSubmiting},\"Close\")));}}]);return RoomDetailCheckout;}(React.Component);","map":{"version":3,"sources":["/Users/bangth/Desktop/TBHotel/src/components/RoomDetailCheckout.js"],"names":["React","Button","Form","Header","Image","Label","Modal","Input","Moment","momentLocalizer","DateTimePicker","ListOption","toast","locale","sleep","ms","Promise","resolve","setTimeout","isMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","RoomDetailCheckout","props","state","open","CheckinTimeSelected","roominfo","fromTime","Date","replace","roomCurrentClass","optionListSelected","moreOptionId","JSON","parse","roomDetailOpen","isSubmiting","CheckinDate","substr","getFullYear","getMonth","getDate","CheckinTime","getHours","getMinutes","forEach","method","bind","setState","action","roomId","roomid","id","checkinTime","console","log","roomClass","options","stringify","totalOptionPrice","i","length","total","error","UpdateCheckInRoom","status","stt","statusList","key","text","val","event","data","value","roomTypeOther","imgsrc","width","boxShadow","handleShowModal","height","roomDescription","getStatusDes","onChangePickedTime","handleChangeInputDate","handleChangeInputTime","handleChangeTypeIDSelect","listoptionIds","listoption","handleChangeOption","checkinRoomSubmit","handleHideModal","Component"],"mappings":"2rCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,MAAR,CAAgBC,IAAhB,CAAsBC,MAAtB,CAA8BC,KAA9B,CAAqCC,KAArC,CAA4CC,KAA5C,CAAmDC,KAAnD,KAA+D,mBAA/D,CAEA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,eAAP,KAA4B,sBAA5B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAO,0CAAP,CACA,OAAQC,UAAR,KAAyB,0BAAzB,CACA,MAAO,kCAAP,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,MAAO,uCAAP,CACA,MAAO,YAAP,CAGAJ,MAAM,CAACK,MAAP,CAAc,IAAd,EACAJ,eAAe,GAEf,QAASK,CAAAA,KAAT,CAAeC,EAAf,CAAmB,CACf,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAAAC,OAAO,QAAIC,CAAAA,UAAU,CAACD,OAAD,CAAUF,EAAV,CAAd,EAAnB,CAAP,CACH,CAED,GAAMI,CAAAA,QAAQ,CAAG,CACbC,OAAO,CAAE,kBAAY,CACjB,MAAOC,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,UAA1B,CAAP,CACH,CAHY,CAIbC,UAAU,CAAE,qBAAY,CACpB,MAAOH,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAP,CACH,CANY,CAObE,GAAG,CAAE,cAAY,CACb,MAAOJ,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,mBAA1B,CAAP,CACH,CATY,CAUbG,KAAK,CAAE,gBAAY,CACf,MAAOL,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAP,CACH,CAZY,CAabI,OAAO,CAAE,kBAAY,CACjB,MAAON,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,WAA1B,CAAP,CACH,CAfY,CAgBbK,GAAG,CAAE,cAAY,CACb,MAAQT,CAAAA,QAAQ,CAACC,OAAT,IAAsBD,QAAQ,CAACK,UAAT,EAAtB,EAA+CL,QAAQ,CAACM,GAAT,EAA/C,EAAiEN,QAAQ,CAACO,KAAT,EAAjE,EAAqFP,QAAQ,CAACQ,OAAT,EAA7F,CACH,CAlBY,CAAjB,CAqBA,UAAaE,CAAAA,kBAAb,wFACI,4BAAYC,KAAZ,CAAmB,oDACf,oFAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,IAAI,CAAE,KADG,CAETC,mBAAmB,CAAG,MAAKH,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA+B,GAAIC,CAAAA,IAAJ,CAAS,MAAKN,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA6BE,OAA7B,CAAqC,WAArC,CAAkD,GAAlD,CAAT,CAA/B,CAAkG,GAAID,CAAAA,IAAJ,EAF/G,CAGTE,gBAAgB,CAAG,MAAKR,KAAL,CAAWI,QAAX,CAAoBI,gBAApB,CAAuC,MAAKR,KAAL,CAAWI,QAAX,CAAoBI,gBAA3D,CAA8E,EAHxF,CAITC,kBAAkB,CAAG,MAAKT,KAAL,CAAWI,QAAX,CAAoBM,YAApB,CAAmCC,IAAI,CAACC,KAAL,CAAW,MAAKZ,KAAL,CAAWI,QAAX,CAAoBM,YAA/B,CAAnC,CAAkF,EAJ9F,CAKTG,cAAc,CAAE,KALP,CAMTC,WAAW,CAAE,KANJ,CAOTC,WAAW,CAAG,MAAKf,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA+B,MAAKL,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA6BW,MAA7B,CAAoC,CAApC,CAAuC,EAAvC,CAA/B,CAA8E,GAAIV,CAAAA,IAAJ,EAAD,CAAaW,WAAb,GAA6B,GAA7B,EAAqC,GAAIX,CAAAA,IAAJ,EAAD,CAAaY,QAAb,GAA0B,CAA9D,EAAmE,GAAnE,CAA0E,GAAIZ,CAAAA,IAAJ,EAAD,CAAaa,OAAb,EAP3J,CAQTC,WAAW,CAAG,MAAKpB,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA+B,MAAKL,KAAL,CAAWI,QAAX,CAAoBC,QAApB,CAA6BW,MAA7B,CAAoC,EAApC,CAAwC,CAAxC,CAA/B,CAA8E,GAAIV,CAAAA,IAAJ,EAAD,CAAae,QAAb,GAA0B,GAA1B,CAAkC,GAAIf,CAAAA,IAAJ,EAAD,CAAagB,UAAb,EARnH,CAAb,CAWA,CACI,mBADJ,CAEI,cAFJ,CAGI,oBAHJ,CAII,0BAJJ,CAKI,oBALJ,CAMI,iBANJ,CAOI,iBAPJ,CAQI,uBARJ,CASI,uBATJ,EAUEC,OAVF,CAUU,SAACC,MAAD,QAAY,OAAKA,MAAL,EAAe,MAAKA,MAAL,EAAaC,IAAb,+BAA3B,EAVV,EAbe,aAwBlB,CAzBL,yXA6Bc,MAAKC,QAAL,CAAc,CAChBZ,WAAW,CAAE,IADG,CAAd,CA7Bd,QAgCYa,MAhCZ,CAgCqB,SAhCrB,CAiCYC,MAjCZ,CAiCqB,KAAK5B,KAAL,CAAWI,QAAX,CAAoByB,MAjCzC,CAkCYC,EAlCZ,CAkCiB,KAAK9B,KAAL,CAAWI,QAAX,CAAoB0B,EAlCrC,CAmCYC,WAnCZ,CAmC0B,EAnC1B,CAoCQ,GAAI1C,QAAQ,CAACM,GAAT,EAAJ,CAAoB,CAChBoC,WAAW,CAAG,KAAK9B,KAAL,CAAWc,WAAX,CAAyB,GAAzB,CAA+B,KAAKd,KAAL,CAAWmB,WAAxD,CACAY,OAAO,CAACC,GAAR,CAAYF,WAAZ,EACH,CAHD,IAGO,CACHA,WAAW,CAAG,KAAK9B,KAAL,CAAWE,mBAAzB,CACH,CACG+B,SA1CZ,CA0CwB,KAAKjC,KAAL,CAAWO,gBA1CnC,CA2CY2B,OA3CZ,CA2CsBxB,IAAI,CAACyB,SAAL,CAAe,KAAKnC,KAAL,CAAWQ,kBAA1B,CA3CtB,CA6CY4B,gBA7CZ,CA6C+B,CA7C/B,CA8CQ,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAG,KAAKrC,KAAL,CAAWQ,kBAAX,CAA8B8B,MAAlD,CAA0DD,CAAC,EAA3D,CAA+D,CAC3DD,gBAAgB,CAAGA,gBAAgB,CAAG,KAAKpC,KAAL,CAAWQ,kBAAX,CAA8B6B,CAA9B,EAAiCE,KAAvE,CACH,CAhDT,GAkDaT,WAlDb,0BAmDYjD,KAAK,CAAC2D,KAAN,CAAY,wBAAZ,EACA,KAAKf,QAAL,CAAc,CACVZ,WAAW,CAAE,KADH,CAAd,EApDZ,4CAyDaoB,SAzDb,0BA0DYpD,KAAK,CAAC2D,KAAN,CAAY,2BAAZ,EACA,KAAKf,QAAL,CAAc,CACVZ,WAAW,CAAE,KADH,CAAd,EA3DZ,gEAiEc,MAAKd,KAAL,CAAW0C,iBAAX,CAA6BZ,EAA7B,CAAiCC,WAAjC,CAA8CG,SAA9C,CAAyDC,OAAzD,CAAkEE,gBAAlE,CAAoFT,MAApF,CAjEd,gCAmEc,MAAKF,QAAL,CAAc,CAChBb,cAAc,CAAE,KADA,CAEhBC,WAAW,CAAE,KAFG,CAAd,CAnEd,6NAyE8B,IAAb6B,CAAAA,MAAa,2DAAJ,EAAI,CACtB,GAAIC,CAAAA,GAAG,CAAG,KAAK5C,KAAL,CAAW6C,UAArB,CACA,IAAK,GAAIP,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGM,GAAG,CAACL,MAAxB,CAAgCD,CAAC,EAAjC,CAAqC,CACjC,GAAIM,GAAG,CAACN,CAAD,CAAH,CAAOQ,GAAP,EAAcH,MAAlB,CAA0B,CACtB,MAAOC,CAAAA,GAAG,CAACN,CAAD,CAAH,CAAOS,IAAd,CACH,CACJ,CACJ,CAhFL,8DAkFuBC,GAlFvB,CAkF4B,CACpB,KAAKtB,QAAL,CAAc,CACVvB,mBAAmB,CAAE6C,GADX,CAAd,EAGH,CAtFL,0EAwF6BC,KAxF7B,CAwFgD,IAAZD,CAAAA,GAAY,2DAAN,IAAM,CACxC,GAAIA,GAAG,EAAI,IAAX,CACI,OACJ,KAAKtB,QAAL,CAAc,CACVlB,gBAAgB,CAAEwC,GAAG,CAAC,OAAD,CADX,CAAd,EAGH,CA9FL,+DAgGkC,IAAXE,CAAAA,IAAW,2DAAJ,EAAI,CAC1B,KAAKxB,QAAL,CAAc,CACVjB,kBAAkB,CAAEyC,IADV,CAAd,EAGH,CApGL,yDAsGsB,CACd,KAAKxB,QAAL,CAAc,CACVb,cAAc,CAAE,IADN,CAAd,EAGH,CA1GL,yDA4GsB,CACd,KAAKa,QAAL,CAAc,CACVb,cAAc,CAAE,KADN,CAAd,EAGH,CAhHL,oEAkH0BmC,GAlH1B,CAkH+BE,IAlH/B,CAkHqC,CAC7B,KAAKxB,QAAL,CAAc,CACVX,WAAW,CAAEmC,IAAI,CAACC,KADR,CAAd,EAGH,CAtHL,oEAwH0BH,GAxH1B,CAwH+BE,IAxH/B,CAwHqC,CAC7B,KAAKxB,QAAL,CAAc,CACVN,WAAW,CAAE8B,IAAI,CAACC,KADR,CAAd,EAGH,CA5HL,uCA8Ha,iCAC6B,KAAKnD,KADlC,CACEI,QADF,aACEA,QADF,CACYgD,aADZ,aACYA,aADZ,CAEL,GAAIC,CAAAA,MAAM,CAAGjD,QAAQ,CAACyB,MAAT,CAAkB,cAAgBzB,QAAQ,CAACyB,MAAzB,CAAkC,MAApD,CAA6D,oBAA1E,CACA,GAAId,CAAAA,WAAW,CAAG,KAAKd,KAAL,CAAWc,WAA7B,CACA,GAAIK,CAAAA,WAAW,CAAG,KAAKnB,KAAL,CAAWmB,WAA7B,CACA;AACA;AAEA;AAEA,MACI,qBAAC,KAAD,EAAO,KAAK,CAAE,CAACkC,KAAK,CAAE,MAAR,CAAd,CAA+B,IAAI,CAAE,KAAKrD,KAAL,CAAWY,cAAhD,CAAgE,SAAS,KAAzE,CACO,OAAO,CAAE,kBAAM,CACX,MAAI,CAACa,QAAL,CAAc,CAACb,cAAc,CAAE,KAAjB,CAAd,EACH,CAHR,CAIO,OAAO,CAAE,yBAAG,SAAS,CAAC,WAAb,EAAyB,2BAAK,KAAK,CAAE,CAAC0C,SAAS,CAAE,oBAAZ,CAAZ,CACK,OAAO,CAAE,KAAKC,eADnB,CAEK,GAAG,CAAC,sBAFT,CAEgC,GAAG,CAAC,OAFpC,EAAzB,CAJhB,EAOI,oBAAC,KAAD,CAAO,MAAP,oBAPJ,CAQI,oBAAC,KAAD,CAAO,OAAP,EAAe,KAAK,KAApB,CAAqB,SAAS,KAA9B,CAA+B,KAAK,CAAE,CAACC,MAAM,CAAE,MAAT,CAAtC,EACI,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,GAAG,CAAEJ,MAA1B,CAAkC,OAAO,KAAzC,EADJ,CAEI,oBAAC,KAAD,CAAO,WAAP,EAAmB,KAAK,CAAE,CAACC,KAAK,CAAE,MAAR,CAA1B,EACI,oBAAC,MAAD,MAASlD,QAAQ,CAACsD,eAAlB,CADJ,CAEI,wCACa,KAAKC,YAAL,CAAkBvD,QAAQ,CAACuC,MAA3B,CADb,CAFJ,CAKI,8BALJ,CAMI,iCACI,wCADJ,CANJ,CASI,+BACK,CAACtD,QAAQ,CAACM,GAAT,EAAD,CAAkB,oBAAC,cAAD,EAAgB,KAAK,CAAE,KAAKM,KAAL,CAAWE,mBAAlC,CACgB,QAAQ,CAAE,KAAKyD,kBAD/B,EAAlB,CAEG,2BAAK,KAAK,CAAE,CAACN,KAAK,CAAE,MAAR,CAAZ,EAA6B,oBAAC,KAAD,EAAO,KAAK,CAAE,CAACA,KAAK,CAAE,KAAR,CAAd,CACO,QAAQ,CAAE,KAAKO,qBADtB,CAEO,KAAK,CAAE9C,WAFd,CAE2B,IAAI,CAAC,MAFhC,CAGO,IAAI,CAAC,aAHZ,EAA7B,CAII,oBAAC,KAAD,EAAO,KAAK,CAAE,CAACuC,KAAK,CAAE,KAAR,CAAd,CAA8B,QAAQ,CAAE,KAAKQ,qBAA7C,CACO,KAAK,CAAE1C,WADd,CAC2B,IAAI,CAAC,MADhC,CACuC,IAAI,CAAC,aAD5C,EAJJ,CAHR,CATJ,CAqBI,8BArBJ,CAsBI,+BACI,iCACI,0CADJ,CADJ,CAII,oBAAC,IAAD,CAAM,MAAN,EACI,KAAK,KADT,CAEI,IAAI,CAAC,EACL;AAHJ,CAII,KAAK,CAAE,KAAKnB,KAAL,CAAWO,gBAJtB,CAKI,OAAO,CAAE4C,aALb,CAMI,QAAQ,CAAE,KAAKW,wBANnB,CAOI,WAAW,CAAC,MAPhB,EAJJ,CAtBJ,CAoCI,8BApCJ,CAqCI,oBAAC,KAAD,EAAO,EAAE,CAAC,GAAV,CAAc,KAAK,CAAC,MAApB,CAA2B,MAAM,KAAjC,gCArCJ,CAwCI,oBAAC,UAAD,EAAY,aAAa,CAAE,KAAK/D,KAAL,CAAWgE,aAAtC,CACY,UAAU,CAAE,KAAKhE,KAAL,CAAWiE,UADnC,CAEY,cAAc,CAAE,KAAKC,kBAFjC,CAGY,kBAAkB,CAAE,KAAKjE,KAAL,CAAWQ,kBAAX,CAAgC,KAAKR,KAAL,CAAWQ,kBAA3C,CAAgE,EAHhG,EAxCJ,CAFJ,CARJ,CAwDI,oBAAC,KAAD,CAAO,OAAP,MACI,oBAAC,MAAD,EAAQ,OAAO,KAAf,CAAgB,OAAO,CAAE,KAAK0D,iBAA9B,CAAiD,QAAQ,CAAE,KAAKlE,KAAL,CAAWa,WAAtE,YADJ,CAII,oBAAC,MAAD,EAAQ,OAAO,KAAf,CAAgB,OAAO,CAAE,KAAKsD,eAA9B,CAA+C,QAAQ,CAAE,KAAKnE,KAAL,CAAWa,WAApE,UAJJ,CAxDJ,CADJ,CAmEH,CA3ML,gCAAwC5C,KAAK,CAACmG,SAA9C","sourcesContent":["import React from 'react'\nimport {Button, Form, Header, Image, Label, Modal, Input} from 'semantic-ui-react'\nimport PropTypes from \"prop-types\";\nimport Moment from 'moment'\nimport momentLocalizer from 'react-widgets-moment';\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport {ListOption} from '../components/ListOption';\nimport 'semantic-ui-css/semantic.min.css';\nimport {toast} from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../App.css';\n\n\nMoment.locale('vn');\nmomentLocalizer();\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nconst isMobile = {\n    Android: function () {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function () {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function () {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function () {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function () {\n        return navigator.userAgent.match(/IEMobile/i);\n    },\n    any: function () {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n};\n\nexport class RoomDetailCheckout extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: false,\n            CheckinTimeSelected: (this.props.roominfo.fromTime ? new Date(this.props.roominfo.fromTime.replace(/[A-Za-z]/g, ' ')) : new Date()),\n            roomCurrentClass: (this.props.roominfo.roomCurrentClass ? this.props.roominfo.roomCurrentClass : ''),\n            optionListSelected: (this.props.roominfo.moreOptionId ? JSON.parse(this.props.roominfo.moreOptionId) : ''),\n            roomDetailOpen: false,\n            isSubmiting: false,\n            CheckinDate: (this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(0, 10) : ((new Date()).getFullYear() + \"-\" + ((new Date()).getMonth() + 1) + \"-\" + (new Date()).getDate())),\n            CheckinTime: (this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(11, 5) : ((new Date()).getHours() + \":\" + ((new Date()).getMinutes())))\n        };\n\n        [\n            'checkinRoomSubmit',\n            'getStatusDes',\n            'onChangePickedTime',\n            'handleChangeTypeIDSelect',\n            'handleChangeOption',\n            'handleShowModal',\n            'handleHideModal',\n            'handleChangeInputDate',\n            'handleChangeInputTime'\n        ].forEach((method) => this[method] = this[method].bind(this));\n    }\n\n    async checkinRoomSubmit() {\n        // window.location.reload(true);\n        await this.setState({\n            isSubmiting: true\n        });\n        let action = 'checkin';\n        let roomId = this.props.roominfo.roomid;\n        let id = this.props.roominfo.id;\n        let checkinTime = '';\n        if (isMobile.iOS()) {\n            checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n            console.log(checkinTime)\n        } else {\n            checkinTime = this.state.CheckinTimeSelected;\n        }\n        let roomClass = this.state.roomCurrentClass;\n        let options = JSON.stringify(this.state.optionListSelected);\n\n        let totalOptionPrice = 0;\n        for (let i = 0; i < this.state.optionListSelected.length; i++) {\n            totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n        }\n\n        if (!checkinTime) {\n            toast.error('Bạn chưa chọn giờ vào!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n        if (!roomClass) {\n            toast.error('Bạn chưa chọn loại phòng!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n\n        await this.props.UpdateCheckInRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId);\n        // await sleep(5000);\n        await this.setState({\n            roomDetailOpen: false,\n            isSubmiting: false\n        });\n    }\n\n    getStatusDes(status = '') {\n        let stt = this.props.statusList;\n        for (var i = 0; i < stt.length; i++) {\n            if (stt[i].key == status) {\n                return stt[i].text;\n            }\n        }\n    }\n\n    onChangePickedTime(val) {\n        this.setState({\n            CheckinTimeSelected: val\n        });\n    }\n\n    handleChangeTypeIDSelect(event, val = null) {\n        if (val == null)\n            return;\n        this.setState({\n            roomCurrentClass: val['value']\n        });\n    }\n\n    handleChangeOption(data = []) {\n        this.setState({\n            optionListSelected: data\n        });\n    }\n\n    handleShowModal() {\n        this.setState({\n            roomDetailOpen: true\n        });\n    }\n\n    handleHideModal() {\n        this.setState({\n            roomDetailOpen: false\n        });\n    }\n\n    handleChangeInputDate(val, data) {\n        this.setState({\n            CheckinDate: data.value\n        });\n    }\n\n    handleChangeInputTime(val, data) {\n        this.setState({\n            CheckinTime: data.value\n        });\n    }\n\n    render() {\n        const {roominfo, roomTypeOther} = this.props;\n        let imgsrc = roominfo.roomid ? 'images/room' + roominfo.roomid + '.png' : 'images/room101.png';\n        let CheckinDate = this.state.CheckinDate;\n        let CheckinTime = this.state.CheckinTime;\n        // console.log(this.state.CheckinTimeSelected);\n        // console.log(this.props.roominfo);\n\n        // if (isMobile.iOS() && roominfo.fromtime) {}\n\n        return (\n            <Modal style={{width: '100%'}} open={this.state.roomDetailOpen} closeIcon\n                   onClose={() => {\n                       this.setState({roomDetailOpen: false})\n                   }}\n                   trigger={<a className=\"image fit\"><img style={{boxShadow: '10px 10px 5px #ccc'}}\n                                                          onClick={this.handleShowModal}\n                                                          src=\"images/hotelico.jpeg\" alt=\"Hotel\"/></a>}>\n                <Modal.Header>Room Detail</Modal.Header>\n                <Modal.Content image scrolling style={{height: '450%'}}>\n                    <Image size='medium' src={imgsrc} wrapped/>\n                    <Modal.Description style={{width: '100%'}}>\n                        <Header>{roominfo.roomDescription}</Header>\n                        <b>\n                            Status: {this.getStatusDes(roominfo.status)}\n                        </b>\n                        <hr/>\n                        <label>\n                            <b>Checkin:</b>\n                        </label>\n                        <div>\n                            {!isMobile.iOS() ? <DateTimePicker value={this.state.CheckinTimeSelected}\n                                                               onChange={this.onChangePickedTime}/> :\n                                <div style={{width: '100%'}}><Input style={{width: '50%'}}\n                                                                    onChange={this.handleChangeInputDate}\n                                                                    value={CheckinDate} type=\"date\"\n                                                                    name=\"CheckinDate\"/>\n                                    <Input style={{width: '50%'}} onChange={this.handleChangeInputTime}\n                                           value={CheckinTime} type=\"time\" name=\"CheckinTime\"/>\n                                </div>\n                            }\n                        </div>\n                        <hr/>\n                        <div>\n                            <label>\n                                <b>Room Type:</b>\n                            </label>\n                            <Form.Select\n                                fluid\n                                icon=''\n                                // label='Room Type:'\n                                value={this.state.roomCurrentClass}\n                                options={roomTypeOther}\n                                onChange={this.handleChangeTypeIDSelect}\n                                placeholder='Type'\n                            />\n                        </div>\n                        <hr/>\n                        <Label as='a' color='teal' ribbon>\n                            Thêm Sản Phẩm:\n                        </Label>\n                        <ListOption listoptionIds={this.props.listoptionIds}\n                                    listoption={this.props.listoption}\n                                    onChangeOption={this.handleChangeOption}\n                                    optionListSelected={this.state.optionListSelected ? this.state.optionListSelected : []}/>\n                    </Modal.Description>\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button primary onClick={this.checkinRoomSubmit} disabled={this.state.isSubmiting}>\n                        CheckIn\n                    </Button>\n                    <Button primary onClick={this.handleHideModal} disabled={this.state.isSubmiting}>\n                        Close\n                    </Button>\n                </Modal.Actions>\n            </Modal>\n        );\n    }\n}\n\n\nRoomDetailCheckout.propTypes = {\n    roominfo: PropTypes.object,\n    statusList: PropTypes.array,\n    roomTypeOther: PropTypes.array,\n    listoptionIds: PropTypes.array,\n    listoption: PropTypes.array,\n    UpdateCheckInRoom: PropTypes.func\n}"]},"metadata":{},"sourceType":"module"}