{"ast":null,"code":"import _defineProperty from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import{Button,Form,Input,Dropdown,Divider,Grid,Label,Statistic}from'semantic-ui-react';import TableBT from'react-bootstrap/Table';import{Segment}from'semantic-ui-react';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'../App.css';function formatNumber(num){return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g,'$1,');}export var ListOption=/*#__PURE__*/function(_React$Component){_inherits(ListOption,_React$Component);function ListOption(props){var _this;_classCallCheck(this,ListOption);console.log('constructor');_this=_possibleConstructorReturn(this,_getPrototypeOf(ListOption).call(this,props));_this.state={items:_this.props.listoptionIds.slice(0,_this.props.optionListSelected.length),option:{description:'',optionid:null,price:0,quantity:0,total:0},listoptionIds:[],optionListSelected:[],totalOptions:0};['handleChangeDropdown','handleChangeQuantity','handleAddRow','handleRemoveRow','handleOptionOtherChange'].forEach(function(method){return _this[method]=_this[method].bind(_assertThisInitialized(_this));});return _this;}_createClass(ListOption,[{key:\"componentDidMount\",value:function componentDidMount(){console.log('componentDidMount');var listOptionSlt=this.props.optionListSelected;var listOptionSltIds=[];listOptionSlt&&listOptionSlt.map(function(item){listOptionSltIds.push(item[\"optionid\"]);});var listOptionIDsTmp=listOptionSltIds.concat(this.props.listoptionIds);var listOptionIDsMerge=listOptionIDsTmp.filter(function(item,pos){return listOptionIDsTmp.indexOf(item)===pos;});this.setState({items:listOptionIDsMerge.slice(0,this.props.optionListSelected.length)});//get List option for select\nvar listoptionIdstmp={};var listoptionIds=[];this.props.listoption.map(function(item){listoptionIdstmp={};listoptionIdstmp['key']=item['optionId'];listoptionIdstmp['text']=item['description'];listoptionIdstmp['value']=item['optionId'];listoptionIds.push(listoptionIdstmp);});this.setState({listoptionIds:listoptionIds});//Set value for State: optionListSelected\nthis.setState({optionListSelected:this.props.optionListSelected});}},{key:\"handleAddRow\",value:function handleAddRow(){console.log('handleAddRow');var option=_objectSpread({},this.state.option);var optionListSelected=this.state.optionListSelected;var flagNew=true;for(var i=0;i<optionListSelected.length;i++){if(optionListSelected[i].optionid==option.optionid){if(optionListSelected[i].description.startsWith(\"Other\")){optionListSelected[i].quantity=1;optionListSelected[i].total=option.total;}else{optionListSelected[i].quantity=parseInt(option.quantity)+parseInt(optionListSelected[i].quantity);optionListSelected[i].total=parseInt(optionListSelected[i].quantity)*parseInt(optionListSelected[i].price);}flagNew=false;break;}}console.log(optionListSelected);if(flagNew){optionListSelected.push(option);}this.setState({optionListSelected:optionListSelected});this.props.onChangeOption(optionListSelected);}},{key:\"handleRemoveRow\",value:function handleRemoveRow(){console.log('handleRemoveRow');var optionListSelected=this.state.optionListSelected;optionListSelected.pop();this.setState({optionListSelected:optionListSelected});this.props.onChangeOption(optionListSelected);}},{key:\"handleChangeQuantity\",value:function handleChangeQuantity(event,data){console.log('handleChangeQuantity');if(!data){return;}if(isNaN(data.value)){return;}else{if(parseInt(data.value)<0||parseInt(data.value)>100){toast.info('Số lượng phải từ 0 - 100');return;}}var option=_objectSpread({},this.state.option);option['quantity']=parseInt(data.value);option['total']=parseInt(data.value)*parseInt(option['price']);this.setState({option:option});}},{key:\"handleChangeDropdown\",value:function handleChangeDropdown(event,data){console.log('handleChangeDropdown');var listoption=this.props.listoption;var tmp=[];for(var i=0;i<listoption.length;i++){if(listoption[i].optionId==data.value){tmp=[];tmp=listoption[i];tmp['optionid']=listoption[i].optionId;tmp['quantity']=1;tmp['total']=tmp['price'];break;}}this.setState({option:tmp});}},{key:\"handleOptionOtherChange\",value:function handleOptionOtherChange(val,data){var tmp=_objectSpread({},this.state.option);tmp['total']=parseInt(data.value)?parseInt(data.value):0;console.log(tmp);this.setState({option:tmp});}},{key:\"render\",value:function render(){console.log('render');var items=this.state.optionListSelected;// console.log(items);\n// console.log(this.props.listoptionIds);\n// console.log(this.props.listoption);\n// console.log(this.props.optionListSelected);\n// console.log(this.state.listoptionIds)\n// console.log(this.state.optionListSelected);\n// debugger;\nvar total_option=0;var count=0;return React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(Segment,{placeholder:true,textAlign:\"center\"},React.createElement(Grid,{columns:1,relaxed:\"very\",stackable:true},React.createElement(Grid.Column,null,React.createElement(Form,null,React.createElement(Label,null,\"Lo\\u1EA1i SP:\"),React.createElement(Dropdown,{options:this.state.listoptionIds,value:this.state.option.optionid,placeholder:\"Choose an option\",selection:true,onChange:this.handleChangeDropdown}),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(Label,null,\"S\\u1ED1 l\\u01B0\\u1EE3ng:\"),React.createElement(Input,{disabled:this.state.option.optionid==0||this.state.option.optionid==null||this.state.option.description.startsWith(\"Other\"),placeholder:\"...\",type:\"number\",max:\"100\",min:\"0\",value:this.state.option.quantity,onChange:this.handleChangeQuantity}),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(Label,null,\" S\\u1ED1 ti\\u1EC1n/1 sp: \",React.createElement(\"b\",null,formatNumber(this.state.option.price),\" VND\")),React.createElement(\"br\",null),React.createElement(\"br\",null)),React.createElement(Divider,{horizontal:true},\"Total\"),this.state.option.description.startsWith(\"Other\")?React.createElement(\"div\",null,React.createElement(Input,{size:\"small\",type:\"number\",value:this.state.option.total,onChange:this.handleOptionOtherChange}),React.createElement(\"br\",null),React.createElement(\"br\",null)):React.createElement(Statistic,{horizontal:true,size:\"tiny\"},React.createElement(Statistic.Value,null,formatNumber(this.state.option.total)),React.createElement(Statistic.Label,null,\"vnd\")),React.createElement(Button,{content:\"Add\",icon:\"plus square\",size:\"big\",color:\"grey\",onClick:this.handleAddRow,disabled:this.state.option.optionid==0||this.state.option.optionid==null||this.state.option.quantity==0||this.state.option.total==0}))))),React.createElement(Button.Group,null),this.state.optionListSelected?React.createElement(TableBT,{size:\"sm\",striped:true,bordered:true,hover:true,style:{width:'100%'}},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null),React.createElement(\"th\",null,React.createElement(Button,{label:\"Remove\",disabled:this.state.optionListSelected.length===0,icon:\"minus square\",onClick:this.handleRemoveRow,floated:\"right\"})))),React.createElement(\"tbody\",null,this.state.optionListSelected.map(function(item){return React.createElement(\"tr\",{key:Math.random()},item&&[React.createElement(\"td\",{key:Math.random()},React.createElement(\"b\",null,item.quantity,\" - \",item.description)),React.createElement(\"td\",{key:Math.random()},React.createElement(\"b\",{style:{float:'right'}},React.createElement(Label,{as:\"a\",color:\"olive\",tag:true,size:\"large\"},formatNumber(item.total),\" VND\")),React.createElement(\"p\",{hidden:true},count=count+1,\" \",total_option=total_option+item.total))]);})),React.createElement(\"tfoot\",null,React.createElement(\"tr\",null,React.createElement(\"td\",null),React.createElement(\"td\",null,React.createElement(\"b\",{style:{float:'right'}},React.createElement(Label,{as:\"a\",color:\"yellow\",tag:true,size:\"large\"},formatNumber(total_option),\" VND\")))))):React.createElement(\"div\",null));}}]);return ListOption;}(React.Component);","map":{"version":3,"sources":["/Users/bangth/Desktop/TBHotel/src/components/ListOption.js"],"names":["React","Button","Form","Input","Dropdown","Divider","Grid","Label","Statistic","TableBT","Segment","ToastContainer","toast","formatNumber","num","toString","replace","ListOption","props","console","log","state","items","listoptionIds","slice","optionListSelected","length","option","description","optionid","price","quantity","total","totalOptions","forEach","method","bind","listOptionSlt","listOptionSltIds","map","item","push","listOptionIDsTmp","concat","listOptionIDsMerge","filter","pos","indexOf","setState","listoptionIdstmp","listoption","flagNew","i","startsWith","parseInt","onChangeOption","pop","event","data","isNaN","value","info","tmp","optionId","val","total_option","count","handleChangeDropdown","handleChangeQuantity","handleOptionOtherChange","handleAddRow","width","handleRemoveRow","Math","random","float","Component"],"mappings":"wzDAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,MAAR,CAAgBC,IAAhB,CAAsBC,KAAtB,CAA6BC,QAA7B,CAAuCC,OAAvC,CAAgDC,IAAhD,CAAsDC,KAAtD,CAA6DC,SAA7D,KAA6E,mBAA7E,CAEA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,OAAQC,OAAR,KAAsB,mBAAtB,CACA,OAASC,cAAT,CAAyBC,KAAzB,KAAsC,gBAAtC,CACA,MAAO,uCAAP,CACA,MAAO,YAAP,CAEA,QAASC,CAAAA,YAAT,CAAsBC,GAAtB,CAA2B,CACvB,MAAOA,CAAAA,GAAG,CAACC,QAAJ,GAAeC,OAAf,CAAuB,yBAAvB,CAAkD,KAAlD,CAAP,CACH,CAED,UAAaC,CAAAA,UAAb,gFACI,oBAAYC,KAAZ,CAAmB,4CACfC,OAAO,CAACC,GAAR,CAAY,aAAZ,EACA,4EAAMF,KAAN,GACA,MAAKG,KAAL,CAAa,CACTC,KAAK,CAAE,MAAKJ,KAAL,CAAWK,aAAX,CAAyBC,KAAzB,CAA+B,CAA/B,CAAkC,MAAKN,KAAL,CAAWO,kBAAX,CAA8BC,MAAhE,CADE,CAETC,MAAM,CAAE,CACJC,WAAW,CAAE,EADT,CAEJC,QAAQ,CAAE,IAFN,CAGJC,KAAK,CAAE,CAHH,CAIJC,QAAQ,CAAE,CAJN,CAKJC,KAAK,CAAE,CALH,CAFC,CASTT,aAAa,CAAE,EATN,CAUTE,kBAAkB,CAAE,EAVX,CAWTQ,YAAY,CAAE,CAXL,CAAb,CAaA,CACI,sBADJ,CAEI,sBAFJ,CAGI,cAHJ,CAII,iBAJJ,CAKI,yBALJ,EAMEC,OANF,CAMU,SAACC,MAAD,QAAY,OAAKA,MAAL,EAAe,MAAKA,MAAL,EAAaC,IAAb,+BAA3B,EANV,EAhBe,aAuBlB,CAxBL,oFA0BwB,CAChBjB,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACA,GAAIiB,CAAAA,aAAa,CAAG,KAAKnB,KAAL,CAAWO,kBAA/B,CACA,GAAIa,CAAAA,gBAAgB,CAAG,EAAvB,CACAD,aAAa,EAAIA,aAAa,CAACE,GAAd,CAAkB,SAAAC,IAAI,CAAI,CACvCF,gBAAgB,CAACG,IAAjB,CAAsBD,IAAI,CAAC,UAAD,CAA1B,EACH,CAFgB,CAAjB,CAIA,GAAIE,CAAAA,gBAAgB,CAAGJ,gBAAgB,CAACK,MAAjB,CAAwB,KAAKzB,KAAL,CAAWK,aAAnC,CAAvB,CACA,GAAIqB,CAAAA,kBAAkB,CAAGF,gBAAgB,CAACG,MAAjB,CAAwB,SAACL,IAAD,CAAOM,GAAP,QAAeJ,CAAAA,gBAAgB,CAACK,OAAjB,CAAyBP,IAAzB,IAAmCM,GAAlD,EAAxB,CAAzB,CAEA,KAAKE,QAAL,CAAc,CACV1B,KAAK,CAAEsB,kBAAkB,CAACpB,KAAnB,CAAyB,CAAzB,CAA4B,KAAKN,KAAL,CAAWO,kBAAX,CAA8BC,MAA1D,CADG,CAAd,EAKA;AACA,GAAIuB,CAAAA,gBAAgB,CAAG,EAAvB,CACA,GAAI1B,CAAAA,aAAa,CAAG,EAApB,CAEA,KAAKL,KAAL,CAAWgC,UAAX,CAAsBX,GAAtB,CAA0B,SAAAC,IAAI,CAAI,CAC9BS,gBAAgB,CAAG,EAAnB,CACAA,gBAAgB,CAAC,KAAD,CAAhB,CAA0BT,IAAI,CAAC,UAAD,CAA9B,CACAS,gBAAgB,CAAC,MAAD,CAAhB,CAA2BT,IAAI,CAAC,aAAD,CAA/B,CACAS,gBAAgB,CAAC,OAAD,CAAhB,CAA4BT,IAAI,CAAC,UAAD,CAAhC,CACAjB,aAAa,CAACkB,IAAd,CAAmBQ,gBAAnB,EACH,CAND,EAOA,KAAKD,QAAL,CAAc,CACVzB,aAAa,CAAEA,aADL,CAAd,EAIA;AACA,KAAKyB,QAAL,CAAc,CACVvB,kBAAkB,CAAE,KAAKP,KAAL,CAAWO,kBADrB,CAAd,EAIH,CA9DL,mDAiEmB,CACXN,OAAO,CAACC,GAAR,CAAY,cAAZ,EACA,GAAMO,CAAAA,MAAM,kBAAO,KAAKN,KAAL,CAAWM,MAAlB,CAAZ,CACA,GAAIF,CAAAA,kBAAkB,CAAG,KAAKJ,KAAL,CAAWI,kBAApC,CACA,GAAI0B,CAAAA,OAAO,CAAG,IAAd,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG3B,kBAAkB,CAACC,MAAvC,CAA+C0B,CAAC,EAAhD,CAAoD,CAChD,GAAI3B,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBvB,QAAtB,EAAkCF,MAAM,CAACE,QAA7C,CAAuD,CACnD,GAAGJ,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBxB,WAAtB,CAAkCyB,UAAlC,CAA6C,OAA7C,CAAH,CAAyD,CACrD5B,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBrB,QAAtB,CAAiC,CAAjC,CACAN,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBpB,KAAtB,CAA8BL,MAAM,CAACK,KAArC,CACH,CAHD,IAGO,CACHP,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBrB,QAAtB,CAAiCuB,QAAQ,CAAC3B,MAAM,CAACI,QAAR,CAAR,CAA4BuB,QAAQ,CAAC7B,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBrB,QAAvB,CAArE,CACAN,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBpB,KAAtB,CAA8BsB,QAAQ,CAAC7B,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBrB,QAAvB,CAAR,CAA2CuB,QAAQ,CAAC7B,kBAAkB,CAAC2B,CAAD,CAAlB,CAAsBtB,KAAvB,CAAjF,CACH,CACDqB,OAAO,CAAG,KAAV,CACA,MACH,CACJ,CACDhC,OAAO,CAACC,GAAR,CAAYK,kBAAZ,EACA,GAAI0B,OAAJ,CAAa,CACT1B,kBAAkB,CAACgB,IAAnB,CAAwBd,MAAxB,EACH,CACD,KAAKqB,QAAL,CAAc,CACVvB,kBAAkB,CAAEA,kBADV,CAAd,EAIA,KAAKP,KAAL,CAAWqC,cAAX,CAA0B9B,kBAA1B,EACH,CA5FL,yDA8FsB,CACdN,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACA,GAAMK,CAAAA,kBAAkB,CAAG,KAAKJ,KAAL,CAAWI,kBAAtC,CACAA,kBAAkB,CAAC+B,GAAnB,GACA,KAAKR,QAAL,CAAc,CACVvB,kBAAkB,CAAEA,kBADV,CAAd,EAIA,KAAKP,KAAL,CAAWqC,cAAX,CAA0B9B,kBAA1B,EACH,CAvGL,kEAyGyBgC,KAzGzB,CAyGgCC,IAzGhC,CAyGsC,CAC9BvC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACA,GAAG,CAACsC,IAAJ,CAAS,CACL,OACH,CACD,GAAIC,KAAK,CAACD,IAAI,CAACE,KAAN,CAAT,CAAuB,CACnB,OACH,CAFD,IAEO,CACH,GAAIN,QAAQ,CAACI,IAAI,CAACE,KAAN,CAAR,CAAuB,CAAvB,EAA4BN,QAAQ,CAACI,IAAI,CAACE,KAAN,CAAR,CAAuB,GAAvD,CAA4D,CACxDhD,KAAK,CAACiD,IAAN,CAAW,0BAAX,EACA,OACH,CACJ,CACD,GAAIlC,CAAAA,MAAM,kBAAO,KAAKN,KAAL,CAAWM,MAAlB,CAAV,CACAA,MAAM,CAAC,UAAD,CAAN,CAAqB2B,QAAQ,CAACI,IAAI,CAACE,KAAN,CAA7B,CACAjC,MAAM,CAAC,OAAD,CAAN,CAAkB2B,QAAQ,CAACI,IAAI,CAACE,KAAN,CAAR,CAAuBN,QAAQ,CAAC3B,MAAM,CAAC,OAAD,CAAP,CAAjD,CAEA,KAAKqB,QAAL,CAAc,CACVrB,MAAM,CAAEA,MADE,CAAd,EAGH,CA7HL,kEA+HyB8B,KA/HzB,CA+HgCC,IA/HhC,CA+HsC,CAC9BvC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACA,GAAM8B,CAAAA,UAAU,CAAG,KAAKhC,KAAL,CAAWgC,UAA9B,CACA,GAAIY,CAAAA,GAAG,CAAG,EAAV,CACA,IAAK,GAAIV,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,UAAU,CAACxB,MAA/B,CAAuC0B,CAAC,EAAxC,CAA4C,CACxC,GAAIF,UAAU,CAACE,CAAD,CAAV,CAAcW,QAAd,EAA0BL,IAAI,CAACE,KAAnC,CAA0C,CACtCE,GAAG,CAAG,EAAN,CACAA,GAAG,CAAGZ,UAAU,CAACE,CAAD,CAAhB,CACAU,GAAG,CAAC,UAAD,CAAH,CAAkBZ,UAAU,CAACE,CAAD,CAAV,CAAcW,QAAhC,CACAD,GAAG,CAAC,UAAD,CAAH,CAAkB,CAAlB,CACAA,GAAG,CAAC,OAAD,CAAH,CAAeA,GAAG,CAAC,OAAD,CAAlB,CACA,MACH,CACJ,CACD,KAAKd,QAAL,CAAc,CACVrB,MAAM,CAAEmC,GADE,CAAd,EAGH,CAhJL,wEAkJ4BE,GAlJ5B,CAkJiCN,IAlJjC,CAkJsC,CAC9B,GAAII,CAAAA,GAAG,kBAAO,KAAKzC,KAAL,CAAWM,MAAlB,CAAP,CACAmC,GAAG,CAAC,OAAD,CAAH,CAAgBR,QAAQ,CAACI,IAAI,CAACE,KAAN,CAAR,CAAuBN,QAAQ,CAACI,IAAI,CAACE,KAAN,CAA/B,CAA8C,CAA9D,CACAzC,OAAO,CAACC,GAAR,CAAY0C,GAAZ,EACA,KAAKd,QAAL,CAAc,CACXrB,MAAM,CAAEmC,GADG,CAAd,EAGH,CAzJL,uCA2Ja,CACL3C,OAAO,CAACC,GAAR,CAAY,QAAZ,EACA,GAAME,CAAAA,KAAK,CAAG,KAAKD,KAAL,CAAWI,kBAAzB,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAIwC,CAAAA,YAAY,CAAG,CAAnB,CACA,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACA,MACI,gCACI,+BACI,oBAAC,OAAD,EAAS,WAAW,KAApB,CAAqB,SAAS,CAAC,QAA/B,EACI,oBAAC,IAAD,EAAM,OAAO,CAAE,CAAf,CAAkB,OAAO,CAAC,MAA1B,CAAiC,SAAS,KAA1C,EACI,oBAAC,IAAD,CAAM,MAAN,MACI,oBAAC,IAAD,MACI,oBAAC,KAAD,sBADJ,CAEI,oBAAC,QAAD,EACI,OAAO,CAAE,KAAK7C,KAAL,CAAWE,aADxB,CAEI,KAAK,CAAE,KAAKF,KAAL,CAAWM,MAAX,CAAkBE,QAF7B,CAGI,WAAW,CAAC,kBAHhB,CAII,SAAS,KAJb,CAKI,QAAQ,CAAE,KAAKsC,oBALnB,EAFJ,CASI,8BATJ,CAUI,8BAVJ,CAWI,oBAAC,KAAD,iCAXJ,CAYI,oBAAC,KAAD,EACI,QAAQ,CAAE,KAAK9C,KAAL,CAAWM,MAAX,CAAkBE,QAAlB,EAA8B,CAA9B,EAAmC,KAAKR,KAAL,CAAWM,MAAX,CAAkBE,QAAlB,EAA8B,IAAjE,EAAyE,KAAKR,KAAL,CAAWM,MAAX,CAAkBC,WAAlB,CAA8ByB,UAA9B,CAAyC,OAAzC,CADvF,CAEI,WAAW,CAAC,KAFhB,CAGI,IAAI,CAAC,QAHT,CAII,GAAG,CAAC,KAJR,CAKI,GAAG,CAAC,GALR,CAMI,KAAK,CAAE,KAAKhC,KAAL,CAAWM,MAAX,CAAkBI,QAN7B,CAOI,QAAQ,CAAE,KAAKqC,oBAPnB,EAZJ,CAqBI,8BArBJ,CAsBI,8BAtBJ,CAuBI,oBAAC,KAAD,kCACQ,6BAAIvD,YAAY,CAAC,KAAKQ,KAAL,CAAWM,MAAX,CAAkBG,KAAnB,CAAhB,QADR,CAvBJ,CA0BI,8BA1BJ,CA2BI,8BA3BJ,CADJ,CAmCI,oBAAC,OAAD,EAAS,UAAU,KAAnB,UAnCJ,CAqCK,KAAKT,KAAL,CAAWM,MAAX,CAAkBC,WAAlB,CAA8ByB,UAA9B,CAAyC,OAAzC,EACK,+BACE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,QAAzB,CAAkC,KAAK,CAAE,KAAKhC,KAAL,CAAWM,MAAX,CAAkBK,KAA3D,CAAkE,QAAQ,CAAE,KAAKqC,uBAAjF,EADF,CAEE,8BAFF,CAEO,8BAFP,CADL,CAKK,oBAAC,SAAD,EAAW,UAAU,KAArB,CAAsB,IAAI,CAAC,MAA3B,EACE,oBAAC,SAAD,CAAW,KAAX,MAAkBxD,YAAY,CAAC,KAAKQ,KAAL,CAAWM,MAAX,CAAkBK,KAAnB,CAA9B,CADF,CAEE,oBAAC,SAAD,CAAW,KAAX,YAFF,CA1CV,CAgDI,oBAAC,MAAD,EAAQ,OAAO,CAAC,KAAhB,CAAsB,IAAI,CAAC,aAA3B,CAAyC,IAAI,CAAC,KAA9C,CAAoD,KAAK,CAAC,MAA1D,CACQ,OAAO,CAAE,KAAKsC,YADtB,CAEQ,QAAQ,CAAE,KAAKjD,KAAL,CAAWM,MAAX,CAAkBE,QAAlB,EAA8B,CAA9B,EAAmC,KAAKR,KAAL,CAAWM,MAAX,CAAkBE,QAAlB,EAA8B,IAAjE,EAAyE,KAAKR,KAAL,CAAWM,MAAX,CAAkBI,QAAlB,EAA8B,CAAvG,EAA4G,KAAKV,KAAL,CAAWM,MAAX,CAAkBK,KAAlB,EAA2B,CAFzJ,EAhDJ,CADJ,CADJ,CADJ,CADJ,CA2DI,oBAAC,MAAD,CAAQ,KAAR,MA3DJ,CA6DK,KAAKX,KAAL,CAAWI,kBAAX,CAAgC,oBAAC,OAAD,EAAS,IAAI,CAAC,IAAd,CAAmB,OAAO,KAA1B,CAA2B,QAAQ,KAAnC,CAAoC,KAAK,KAAzC,CAA0C,KAAK,CAAE,CAAC8C,KAAK,CAAE,MAAR,CAAjD,EAC7B,iCACA,8BACI,8BADJ,CAEI,8BACI,oBAAC,MAAD,EACI,KAAK,CAAC,QADV,CAEI,QAAQ,CAAE,KAAKlD,KAAL,CAAWI,kBAAX,CAA8BC,MAA9B,GAAyC,CAFvD,CAGI,IAAI,CAAC,cAHT,CAII,OAAO,CAAE,KAAK8C,eAJlB,CAKI,OAAO,CAAC,OALZ,EADJ,CAFJ,CADA,CAD6B,CAe7B,iCACC,KAAKnD,KAAL,CAAWI,kBAAX,CAA8Bc,GAA9B,CAAkC,SAACC,IAAD,QAC/B,2BAAI,GAAG,CAAEiC,IAAI,CAACC,MAAL,EAAT,EACMlC,IAAD,EACG,CAAC,0BAAI,GAAG,CAAEiC,IAAI,CAACC,MAAL,EAAT,EACG,6BAAIlC,IAAI,CAACT,QAAT,OAAsBS,IAAI,CAACZ,WAA3B,CADH,CAAD,CAGI,0BAAI,GAAG,CAAE6C,IAAI,CAACC,MAAL,EAAT,EACI,yBAAG,KAAK,CAAE,CAACC,KAAK,CAAE,OAAR,CAAV,EAA4B,oBAAC,KAAD,EAAO,EAAE,CAAC,GAAV,CAAc,KAAK,CAAC,OAApB,CAA4B,GAAG,KAA/B,CACO,IAAI,CAAC,OADZ,EACqB9D,YAAY,CAAC2B,IAAI,CAACR,KAAN,CADjC,QAA5B,CADJ,CAGI,yBAAG,MAAM,KAAT,EAAWkC,KAAK,CAAGA,KAAK,CAAG,CAA3B,KAA+BD,YAAY,CAAGA,YAAY,CAAGzB,IAAI,CAACR,KAAlE,CAHJ,CAHJ,CAFR,CAD+B,EAAlC,CADD,CAf6B,CAgC7B,iCACA,8BACI,8BADJ,CAEI,8BACI,yBAAG,KAAK,CAAE,CAAC2C,KAAK,CAAE,OAAR,CAAV,EAA4B,oBAAC,KAAD,EAAO,EAAE,CAAC,GAAV,CAAc,KAAK,CAAC,QAApB,CAA6B,GAAG,KAAhC,CACO,IAAI,CAAC,OADZ,EACqB9D,YAAY,CAACoD,YAAD,CADjC,QAA5B,CADJ,CAFJ,CADA,CAhC6B,CAAhC,CAyCY,+BAtGjB,CADJ,CA2GH,CAnRL,wBAAgCjE,KAAK,CAAC4E,SAAtC","sourcesContent":["import React from 'react'\nimport {Button, Form, Input, Dropdown, Divider, Grid, Label, Statistic} from 'semantic-ui-react'\nimport PropTypes from \"prop-types\";\nimport TableBT from 'react-bootstrap/Table';\nimport {Segment} from 'semantic-ui-react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../App.css';\n\nfunction formatNumber(num) {\n    return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n}\n\nexport class ListOption extends React.Component {\n    constructor(props) {\n        console.log('constructor');\n        super(props);\n        this.state = {\n            items: this.props.listoptionIds.slice(0, this.props.optionListSelected.length),\n            option: {\n                description: '',\n                optionid: null,\n                price: 0,\n                quantity: 0,\n                total: 0\n            },\n            listoptionIds: [],\n            optionListSelected: [],\n            totalOptions: 0,\n        };\n        [\n            'handleChangeDropdown',\n            'handleChangeQuantity',\n            'handleAddRow',\n            'handleRemoveRow',\n            'handleOptionOtherChange'\n        ].forEach((method) => this[method] = this[method].bind(this));\n    }\n\n    componentDidMount() {\n        console.log('componentDidMount');\n        let listOptionSlt = this.props.optionListSelected;\n        let listOptionSltIds = [];\n        listOptionSlt && listOptionSlt.map(item => {\n            listOptionSltIds.push(item[\"optionid\"])\n        })\n\n        var listOptionIDsTmp = listOptionSltIds.concat(this.props.listoptionIds);\n        var listOptionIDsMerge = listOptionIDsTmp.filter((item, pos) => listOptionIDsTmp.indexOf(item) === pos);\n\n        this.setState({\n            items: listOptionIDsMerge.slice(0, this.props.optionListSelected.length)\n        });\n\n\n        //get List option for select\n        var listoptionIdstmp = {};\n        var listoptionIds = [];\n\n        this.props.listoption.map(item => {\n            listoptionIdstmp = {}\n            listoptionIdstmp['key'] = item['optionId'];\n            listoptionIdstmp['text'] = item['description'];\n            listoptionIdstmp['value'] = item['optionId'];\n            listoptionIds.push(listoptionIdstmp);\n        });\n        this.setState({\n            listoptionIds: listoptionIds,\n        });\n\n        //Set value for State: optionListSelected\n        this.setState({\n            optionListSelected: this.props.optionListSelected\n        });\n\n    }\n\n\n    handleAddRow() {\n        console.log('handleAddRow');\n        const option = {...this.state.option};\n        let optionListSelected = this.state.optionListSelected;\n        let flagNew = true;\n        for (let i = 0; i < optionListSelected.length; i++) {\n            if (optionListSelected[i].optionid == option.optionid) {\n                if(optionListSelected[i].description.startsWith(\"Other\")){\n                    optionListSelected[i].quantity = 1;\n                    optionListSelected[i].total = option.total;\n                } else {\n                    optionListSelected[i].quantity = parseInt(option.quantity) + parseInt(optionListSelected[i].quantity);\n                    optionListSelected[i].total = parseInt(optionListSelected[i].quantity) * parseInt(optionListSelected[i].price);\n                }\n                flagNew = false;\n                break;\n            }\n        }\n        console.log(optionListSelected);\n        if (flagNew) {\n            optionListSelected.push(option);\n        }\n        this.setState({\n            optionListSelected: optionListSelected\n        });\n\n        this.props.onChangeOption(optionListSelected);\n    }\n\n    handleRemoveRow() {\n        console.log('handleRemoveRow');\n        const optionListSelected = this.state.optionListSelected;\n        optionListSelected.pop();\n        this.setState({\n            optionListSelected: optionListSelected\n        });\n\n        this.props.onChangeOption(optionListSelected);\n    }\n\n    handleChangeQuantity(event, data) {\n        console.log('handleChangeQuantity');\n        if(!data){\n            return;\n        }\n        if (isNaN(data.value)) {\n            return\n        } else {\n            if (parseInt(data.value) < 0 || parseInt(data.value) > 100) {\n                toast.info('Số lượng phải từ 0 - 100');\n                return;\n            }\n        }\n        let option = {...this.state.option};\n        option['quantity'] = parseInt(data.value);\n        option['total'] = parseInt(data.value) * parseInt(option['price']);\n\n        this.setState({\n            option: option,\n        });\n    }\n\n    handleChangeDropdown(event, data) {\n        console.log('handleChangeDropdown');\n        const listoption = this.props.listoption;\n        let tmp = [];\n        for (let i = 0; i < listoption.length; i++) {\n            if (listoption[i].optionId == data.value) {\n                tmp = [];\n                tmp = listoption[i];\n                tmp['optionid'] = listoption[i].optionId;\n                tmp['quantity'] = 1;\n                tmp['total'] = tmp['price'];\n                break;\n            }\n        }\n        this.setState({\n            option: tmp,\n        });\n    }\n\n    handleOptionOtherChange(val, data){\n        let tmp = {...this.state.option};\n        tmp['total'] = (parseInt(data.value) ? parseInt(data.value) : 0);\n        console.log(tmp);\n        this.setState({\n           option: tmp\n        });\n    }\n\n    render() {\n        console.log('render');\n        const items = this.state.optionListSelected;\n\n        // console.log(items);\n        // console.log(this.props.listoptionIds);\n        // console.log(this.props.listoption);\n        // console.log(this.props.optionListSelected);\n        // console.log(this.state.listoptionIds)\n        // console.log(this.state.optionListSelected);\n        // debugger;\n        var total_option = 0;\n        var count = 0;\n        return (\n            <div>\n                <div>\n                    <Segment placeholder textAlign='center'>\n                        <Grid columns={1} relaxed='very' stackable>\n                            <Grid.Column>\n                                <Form>\n                                    <Label>Loại SP:</Label>\n                                    <Dropdown\n                                        options={this.state.listoptionIds}\n                                        value={this.state.option.optionid}\n                                        placeholder='Choose an option'\n                                        selection\n                                        onChange={this.handleChangeDropdown}\n                                    />\n                                    <br/>\n                                    <br/>\n                                    <Label>Số lượng:</Label>\n                                    <Input\n                                        disabled={this.state.option.optionid == 0 || this.state.option.optionid == null || this.state.option.description.startsWith(\"Other\")}\n                                        placeholder='...'\n                                        type='number'\n                                        max='100'\n                                        min='0'\n                                        value={this.state.option.quantity}\n                                        onChange={this.handleChangeQuantity}\n                                    />\n                                    <br/>\n                                    <br/>\n                                    <Label> Số tiền/1\n                                        sp: <b>{formatNumber(this.state.option.price)} VND</b>\n                                    </Label>\n                                    <br/>\n                                    <br/>\n                                    {/*<Label style={{display: this.state.errMessQuantity}} basic color='red'*/}\n                                    {/*       pointing='left'>*/}\n                                    {/*    Số lượng từ phải từ 0 - 100*/}\n                                    {/*</Label>*/}\n                                </Form>\n\n                                <Divider horizontal>Total</Divider>\n\n                                {this.state.option.description.startsWith(\"Other\")\n                                    ? <div>\n                                        <Input size=\"small\" type=\"number\" value={this.state.option.total} onChange={this.handleOptionOtherChange}/>\n                                        <br/><br/>\n                                     </div>\n                                    : <Statistic horizontal size='tiny'>\n                                        <Statistic.Value>{formatNumber(this.state.option.total)}</Statistic.Value>\n                                        <Statistic.Label>vnd</Statistic.Label>\n                                     </Statistic>\n                                }\n\n                                <Button content='Add' icon='plus square' size='big' color='grey'\n                                        onClick={this.handleAddRow}\n                                        disabled={this.state.option.optionid == 0 || this.state.option.optionid == null || this.state.option.quantity == 0 || this.state.option.total == 0}/>\n                            </Grid.Column>\n                        </Grid>\n                    </Segment>\n                </div>\n                <Button.Group>\n                </Button.Group>\n                {this.state.optionListSelected ? <TableBT size=\"sm\" striped bordered hover style={{width: '100%'}}>\n                    <thead>\n                    <tr>\n                        <th></th>\n                        <th>\n                            <Button\n                                label='Remove'\n                                disabled={this.state.optionListSelected.length === 0}\n                                icon='minus square'\n                                onClick={this.handleRemoveRow}\n                                floated='right'\n                            />\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this.state.optionListSelected.map((item) => (\n                        <tr key={Math.random()}>\n                            {(item) && (\n                                [<td key={Math.random()}>\n                                    <b>{item.quantity} - {item.description}</b>\n                                </td>,\n                                    <td key={Math.random()}>\n                                        <b style={{float: 'right'}}><Label as='a' color='olive' tag\n                                                                           size='large'>{formatNumber(item.total)} VND</Label></b>\n                                        <p hidden>{count = count + 1} {total_option = total_option + item.total}</p>\n                                    </td>]\n                            )\n                            }\n                        </tr>\n                    ))}\n                    </tbody>\n                    <tfoot>\n                    <tr>\n                        <td></td>\n                        <td>\n                            <b style={{float: 'right'}}><Label as='a' color='yellow' tag\n                                                               size='large'>{formatNumber(total_option)} VND</Label></b>\n                        </td>\n                    </tr>\n                    </tfoot>\n                </TableBT> : <div></div>\n                }\n            </div>\n        )\n    }\n}\n\nListOption.propTypes = {\n    listoptionIds: PropTypes.array,\n    listoption: PropTypes.array,\n    optionListSelected: PropTypes.array,\n    onChangeOption: PropTypes.func,\n}"]},"metadata":{},"sourceType":"module"}