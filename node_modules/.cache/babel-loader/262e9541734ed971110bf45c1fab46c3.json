{"ast":null,"code":"var _jsxFileName = \"/Users/bangth/Desktop/TBHotel/src/components/RoomDetailCheckout.js\";\nimport React from 'react';\nimport { Button, Form, Header, Image, Label, Modal, Input } from 'semantic-ui-react';\nimport PropTypes from \"prop-types\";\nimport Moment from 'moment';\nimport momentLocalizer from 'react-widgets-moment';\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport { ListOption } from '../components/ListOption';\nimport 'semantic-ui-css/semantic.min.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../App.css';\nMoment.locale('vn');\nmomentLocalizer();\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nconst isMobile = {\n  Android: function () {\n    return navigator.userAgent.match(/Android/i);\n  },\n  BlackBerry: function () {\n    return navigator.userAgent.match(/BlackBerry/i);\n  },\n  iOS: function () {\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n  },\n  Opera: function () {\n    return navigator.userAgent.match(/Opera Mini/i);\n  },\n  Windows: function () {\n    return navigator.userAgent.match(/IEMobile/i);\n  },\n  any: function () {\n    return isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows();\n  }\n};\nexport class RoomDetailCheckout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      CheckinTimeSelected: this.props.roominfo.fromTime ? new Date(this.props.roominfo.fromTime.replace(/[A-Za-z]/g, ' ')) : new Date(),\n      roomCurrentClass: this.props.roominfo.roomCurrentClass ? this.props.roominfo.roomCurrentClass : '',\n      optionListSelected: this.props.roominfo.moreOptionId ? JSON.parse(this.props.roominfo.moreOptionId) : '',\n      roomDetailOpen: false,\n      isSubmiting: false,\n      CheckinDate: this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(0, 10) : new Date().getFullYear() + \"-\" + (new Date().getMonth() + 1) + \"-\" + new Date().getDate(),\n      CheckinTime: this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(11, 5) : new Date().getHours() + \":\" + new Date().getMinutes()\n    };\n    ['checkinRoomSubmit', 'getStatusDes', 'onChangePickedTime', 'handleChangeTypeIDSelect', 'handleChangeOption', 'handleShowModal', 'handleHideModal', 'handleChangeInputDate', 'handleChangeInputTime'].forEach(method => this[method] = this[method].bind(this));\n  }\n\n  async checkinRoomSubmit() {\n    // window.location.reload(true);\n    await this.setState({\n      isSubmiting: true\n    });\n    let action = 'checkin';\n    let roomId = this.props.roominfo.roomid;\n    let id = this.props.roominfo.id;\n    let checkinTime = '';\n\n    if (isMobile.iOS()) {\n      checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n      console.log(checkinTime);\n    } else {\n      checkinTime = this.state.CheckinTimeSelected;\n    }\n\n    let roomClass = this.state.roomCurrentClass;\n    let options = JSON.stringify(this.state.optionListSelected);\n    let totalOptionPrice = 0;\n\n    for (let i = 0; i < this.state.optionListSelected.length; i++) {\n      totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n    }\n\n    if (!checkinTime) {\n      toast.error('Bạn chưa chọn giờ vào!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    if (!roomClass) {\n      toast.error('Bạn chưa chọn loại phòng!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    await this.props.UpdateCheckInRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId); // await sleep(5000);\n\n    await this.setState({\n      roomDetailOpen: false,\n      isSubmiting: false\n    });\n  }\n\n  getStatusDes(status = '') {\n    let stt = this.props.statusList;\n\n    for (var i = 0; i < stt.length; i++) {\n      if (stt[i].key == status) {\n        return stt[i].text;\n      }\n    }\n  }\n\n  onChangePickedTime(val) {\n    this.setState({\n      CheckinTimeSelected: val\n    });\n  }\n\n  handleChangeTypeIDSelect(event, val = null) {\n    if (val == null) return;\n    this.setState({\n      roomCurrentClass: val['value']\n    });\n  }\n\n  handleChangeOption(data = []) {\n    this.setState({\n      optionListSelected: data\n    });\n  }\n\n  handleShowModal() {\n    this.setState({\n      roomDetailOpen: true\n    });\n  }\n\n  handleHideModal() {\n    this.setState({\n      roomDetailOpen: false\n    });\n  }\n\n  handleChangeInputDate(val, data) {\n    this.setState({\n      CheckinDate: data.value\n    });\n  }\n\n  handleChangeInputTime(val, data) {\n    this.setState({\n      CheckinTime: data.value\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          roominfo = _this$props.roominfo,\n          roomTypeOther = _this$props.roomTypeOther;\n    let imgsrc = roominfo.roomid ? 'images/room' + roominfo.roomid + '.png' : 'images/room101.png';\n    let CheckinDate = this.state.CheckinDate;\n    let CheckinTime = this.state.CheckinTime; // console.log(this.state.CheckinTimeSelected);\n    // console.log(this.props.roominfo);\n    // if (isMobile.iOS() && roominfo.fromtime) {}\n\n    return React.createElement(Modal, {\n      style: {\n        width: '100%'\n      },\n      open: this.state.roomDetailOpen,\n      closeIcon: true,\n      onClose: () => {\n        this.setState({\n          roomDetailOpen: false\n        });\n      },\n      trigger: React.createElement(\"a\", {\n        className: \"image fit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          boxShadow: '10px 10px 5px #ccc'\n        },\n        onClick: this.handleShowModal,\n        src: \"images/hotelico.jpeg\",\n        alt: \"Hotel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Room Detail\"), React.createElement(Modal.Content, {\n      image: true,\n      scrolling: true,\n      style: {\n        height: '450%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Image, {\n      size: \"medium\",\n      src: imgsrc,\n      wrapped: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(Modal.Description, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, roominfo.roomDescription), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Status: \", this.getStatusDes(roominfo.status)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Checkin:\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, !isMobile.iOS() ? React.createElement(DateTimePicker, {\n      value: this.state.CheckinTimeSelected,\n      onChange: this.onChangePickedTime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(Input, {\n      style: {\n        width: '50%'\n      },\n      onChange: this.handleChangeInputDate,\n      value: CheckinDate,\n      type: \"date\",\n      name: \"CheckinDate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(Input, {\n      style: {\n        width: '50%'\n      },\n      onChange: this.handleChangeInputTime,\n      value: CheckinTime,\n      type: \"time\",\n      name: \"CheckinTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Room Type:\")), React.createElement(Form.Select, {\n      fluid: true,\n      icon: \"\" // label='Room Type:'\n      ,\n      value: this.state.roomCurrentClass,\n      options: roomTypeOther,\n      onChange: this.handleChangeTypeIDSelect,\n      placeholder: \"Type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    })), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }), React.createElement(Label, {\n      as: \"a\",\n      color: \"teal\",\n      ribbon: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Th\\xEAm S\\u1EA3n Ph\\u1EA9m:\"), React.createElement(ListOption, {\n      listoptionIds: this.props.listoptionIds,\n      listoption: this.props.listoption,\n      onChangeOption: this.handleChangeOption,\n      optionListSelected: this.state.optionListSelected ? this.state.optionListSelected : [],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }))), React.createElement(Modal.Actions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Button, {\n      primary: true,\n      onClick: this.checkinRoomSubmit,\n      disabled: this.state.isSubmiting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"CheckIn\"), React.createElement(Button, {\n      primary: true,\n      onClick: this.handleHideModal,\n      disabled: this.state.isSubmiting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"Close\")));\n  }\n\n}\nRoomDetailCheckout.propTypes = {\n  roominfo: PropTypes.object,\n  statusList: PropTypes.array,\n  roomTypeOther: PropTypes.array,\n  listoptionIds: PropTypes.array,\n  listoption: PropTypes.array,\n  UpdateCheckInRoom: PropTypes.func\n};","map":{"version":3,"sources":["/Users/bangth/Desktop/TBHotel/src/components/RoomDetailCheckout.js"],"names":["React","Button","Form","Header","Image","Label","Modal","Input","PropTypes","Moment","momentLocalizer","DateTimePicker","ListOption","toast","locale","sleep","ms","Promise","resolve","setTimeout","isMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","RoomDetailCheckout","Component","constructor","props","state","open","CheckinTimeSelected","roominfo","fromTime","Date","replace","roomCurrentClass","optionListSelected","moreOptionId","JSON","parse","roomDetailOpen","isSubmiting","CheckinDate","substr","getFullYear","getMonth","getDate","CheckinTime","getHours","getMinutes","forEach","method","bind","checkinRoomSubmit","setState","action","roomId","roomid","id","checkinTime","console","log","roomClass","options","stringify","totalOptionPrice","i","length","total","error","UpdateCheckInRoom","getStatusDes","status","stt","statusList","key","text","onChangePickedTime","val","handleChangeTypeIDSelect","event","handleChangeOption","data","handleShowModal","handleHideModal","handleChangeInputDate","value","handleChangeInputTime","render","roomTypeOther","imgsrc","width","boxShadow","height","roomDescription","listoptionIds","listoption","propTypes","object","array","func"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Button, Form, Header, Image, Label, Modal, Input} from 'semantic-ui-react'\nimport PropTypes from \"prop-types\";\nimport Moment from 'moment'\nimport momentLocalizer from 'react-widgets-moment';\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport {ListOption} from '../components/ListOption';\nimport 'semantic-ui-css/semantic.min.css';\nimport {toast} from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../App.css';\n\n\nMoment.locale('vn');\nmomentLocalizer();\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nconst isMobile = {\n    Android: function () {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function () {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function () {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function () {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function () {\n        return navigator.userAgent.match(/IEMobile/i);\n    },\n    any: function () {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n};\n\nexport class RoomDetailCheckout extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: false,\n            CheckinTimeSelected: (this.props.roominfo.fromTime ? new Date(this.props.roominfo.fromTime.replace(/[A-Za-z]/g, ' ')) : new Date()),\n            roomCurrentClass: (this.props.roominfo.roomCurrentClass ? this.props.roominfo.roomCurrentClass : ''),\n            optionListSelected: (this.props.roominfo.moreOptionId ? JSON.parse(this.props.roominfo.moreOptionId) : ''),\n            roomDetailOpen: false,\n            isSubmiting: false,\n            CheckinDate: (this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(0, 10) : ((new Date()).getFullYear() + \"-\" + ((new Date()).getMonth() + 1) + \"-\" + (new Date()).getDate())),\n            CheckinTime: (this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(11, 5) : ((new Date()).getHours() + \":\" + ((new Date()).getMinutes())))\n        };\n\n        [\n            'checkinRoomSubmit',\n            'getStatusDes',\n            'onChangePickedTime',\n            'handleChangeTypeIDSelect',\n            'handleChangeOption',\n            'handleShowModal',\n            'handleHideModal',\n            'handleChangeInputDate',\n            'handleChangeInputTime'\n        ].forEach((method) => this[method] = this[method].bind(this));\n    }\n\n    async checkinRoomSubmit() {\n        // window.location.reload(true);\n        await this.setState({\n            isSubmiting: true\n        });\n        let action = 'checkin';\n        let roomId = this.props.roominfo.roomid;\n        let id = this.props.roominfo.id;\n        let checkinTime = '';\n        if (isMobile.iOS()) {\n            checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n            console.log(checkinTime)\n        } else {\n            checkinTime = this.state.CheckinTimeSelected;\n        }\n        let roomClass = this.state.roomCurrentClass;\n        let options = JSON.stringify(this.state.optionListSelected);\n\n        let totalOptionPrice = 0;\n        for (let i = 0; i < this.state.optionListSelected.length; i++) {\n            totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n        }\n\n        if (!checkinTime) {\n            toast.error('Bạn chưa chọn giờ vào!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n        if (!roomClass) {\n            toast.error('Bạn chưa chọn loại phòng!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n\n        await this.props.UpdateCheckInRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId);\n        // await sleep(5000);\n        await this.setState({\n            roomDetailOpen: false,\n            isSubmiting: false\n        });\n    }\n\n    getStatusDes(status = '') {\n        let stt = this.props.statusList;\n        for (var i = 0; i < stt.length; i++) {\n            if (stt[i].key == status) {\n                return stt[i].text;\n            }\n        }\n    }\n\n    onChangePickedTime(val) {\n        this.setState({\n            CheckinTimeSelected: val\n        });\n    }\n\n    handleChangeTypeIDSelect(event, val = null) {\n        if (val == null)\n            return;\n        this.setState({\n            roomCurrentClass: val['value']\n        });\n    }\n\n    handleChangeOption(data = []) {\n        this.setState({\n            optionListSelected: data\n        });\n    }\n\n    handleShowModal() {\n        this.setState({\n            roomDetailOpen: true\n        });\n    }\n\n    handleHideModal() {\n        this.setState({\n            roomDetailOpen: false\n        });\n    }\n\n    handleChangeInputDate(val, data) {\n        this.setState({\n            CheckinDate: data.value\n        });\n    }\n\n    handleChangeInputTime(val, data) {\n        this.setState({\n            CheckinTime: data.value\n        });\n    }\n\n    render() {\n        const {roominfo, roomTypeOther} = this.props;\n        let imgsrc = roominfo.roomid ? 'images/room' + roominfo.roomid + '.png' : 'images/room101.png';\n        let CheckinDate = this.state.CheckinDate;\n        let CheckinTime = this.state.CheckinTime;\n        // console.log(this.state.CheckinTimeSelected);\n        // console.log(this.props.roominfo);\n\n        // if (isMobile.iOS() && roominfo.fromtime) {}\n\n        return (\n            <Modal style={{width: '100%'}} open={this.state.roomDetailOpen} closeIcon\n                   onClose={() => {\n                       this.setState({roomDetailOpen: false})\n                   }}\n                   trigger={<a className=\"image fit\"><img style={{boxShadow: '10px 10px 5px #ccc'}}\n                                                          onClick={this.handleShowModal}\n                                                          src=\"images/hotelico.jpeg\" alt=\"Hotel\"/></a>}>\n                <Modal.Header>Room Detail</Modal.Header>\n                <Modal.Content image scrolling style={{height: '450%'}}>\n                    <Image size='medium' src={imgsrc} wrapped/>\n                    <Modal.Description style={{width: '100%'}}>\n                        <Header>{roominfo.roomDescription}</Header>\n                        <b>\n                            Status: {this.getStatusDes(roominfo.status)}\n                        </b>\n                        <hr/>\n                        <label>\n                            <b>Checkin:</b>\n                        </label>\n                        <div>\n                            {!isMobile.iOS() ? <DateTimePicker value={this.state.CheckinTimeSelected}\n                                                               onChange={this.onChangePickedTime}/> :\n                                <div style={{width: '100%'}}><Input style={{width: '50%'}}\n                                                                    onChange={this.handleChangeInputDate}\n                                                                    value={CheckinDate} type=\"date\"\n                                                                    name=\"CheckinDate\"/>\n                                    <Input style={{width: '50%'}} onChange={this.handleChangeInputTime}\n                                           value={CheckinTime} type=\"time\" name=\"CheckinTime\"/>\n                                </div>\n                            }\n                        </div>\n                        <hr/>\n                        <div>\n                            <label>\n                                <b>Room Type:</b>\n                            </label>\n                            <Form.Select\n                                fluid\n                                icon=''\n                                // label='Room Type:'\n                                value={this.state.roomCurrentClass}\n                                options={roomTypeOther}\n                                onChange={this.handleChangeTypeIDSelect}\n                                placeholder='Type'\n                            />\n                        </div>\n                        <hr/>\n                        <Label as='a' color='teal' ribbon>\n                            Thêm Sản Phẩm:\n                        </Label>\n                        <ListOption listoptionIds={this.props.listoptionIds}\n                                    listoption={this.props.listoption}\n                                    onChangeOption={this.handleChangeOption}\n                                    optionListSelected={this.state.optionListSelected ? this.state.optionListSelected : []}/>\n                    </Modal.Description>\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button primary onClick={this.checkinRoomSubmit} disabled={this.state.isSubmiting}>\n                        CheckIn\n                    </Button>\n                    <Button primary onClick={this.handleHideModal} disabled={this.state.isSubmiting}>\n                        Close\n                    </Button>\n                </Modal.Actions>\n            </Modal>\n        );\n    }\n}\n\n\nRoomDetailCheckout.propTypes = {\n    roominfo: PropTypes.object,\n    statusList: PropTypes.array,\n    roomTypeOther: PropTypes.array,\n    listoptionIds: PropTypes.array,\n    listoption: PropTypes.array,\n    UpdateCheckInRoom: PropTypes.func\n}"]},"metadata":{},"sourceType":"module"}