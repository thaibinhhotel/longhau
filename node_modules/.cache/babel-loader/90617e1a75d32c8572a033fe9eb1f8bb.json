{"ast":null,"code":"import _defineProperty from \"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/bangth/Desktop/TBHotel/src/components/RoomDetailCheckin.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Button, Form, Header, Image, Input, Label, Modal, Segment, Statistic, TextArea, Confirm, Loader, Dimmer } from 'semantic-ui-react';\nimport PropTypes from \"prop-types\";\nimport Moment from 'moment';\nimport momentLocalizer from 'react-widgets-moment';\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport { ListOption } from '../components/ListOption';\nimport { ConfirmFinalMessage } from '../components/ConfirmFinalMessage';\nimport 'semantic-ui-css/semantic.min.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../App.css';\nimport { ListRoomRows } from \"./ListRoomRows\";\nMoment.locale('vn');\nmomentLocalizer();\n\nfunction formatNumber(num) {\n  return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n}\n\nconst isMobile = {\n  Android: function () {\n    return navigator.userAgent.match(/Android/i);\n  },\n  BlackBerry: function () {\n    return navigator.userAgent.match(/BlackBerry/i);\n  },\n  iOS: function () {\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n  },\n  Opera: function () {\n    return navigator.userAgent.match(/Opera Mini/i);\n  },\n  Windows: function () {\n    return navigator.userAgent.match(/IEMobile/i);\n  },\n  any: function () {\n    return isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows();\n  }\n};\nexport class RoomDetailCheckin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.show = () => this.setState({\n      open: true\n    });\n\n    this.handleConfirm = () => this.setState({\n      open: false\n    });\n\n    this.handleCancel = () => this.setState({\n      open: false\n    });\n\n    this.state = {\n      open: false,\n      CheckinTimeSelected: this.props.roominfo.fromTime ? new Date(this.props.roominfo.fromTime.replace(/[A-Za-z]/g, ' ')) : new Date(),\n      CheckoutTimeSelected: this.props.roominfo.toTime ? new Date(this.props.roominfo.toTime.replace(/[A-Za-z]/g, ' ')) : new Date(),\n      roomCurrentClass: this.props.roominfo.roomCurrentClass ? this.props.roominfo.roomCurrentClass : '',\n      optionListSelected: this.props.roominfo.moreOptionId ? JSON.parse(this.props.roominfo.moreOptionId) : '',\n      roomDetailOpen: false,\n      isSubmiting: false,\n      CheckinDate: this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(0, 10) : new Date().getFullYear() + \"-\" + (new Date().getMonth() + 1) + \"-\" + new Date().getDate(),\n      CheckinTime: this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(11, 5) : new Date().getHours() + \":\" + new Date().getMinutes(),\n      CheckoutDate: this.props.roominfo.toTime ? this.props.roominfo.toTime.substr(0, 10) : new Date().getFullYear() + \"-\" + (new Date().getMonth() + 1) + \"-\" + new Date().getDate(),\n      CheckoutTime: this.props.roominfo.toTime ? this.props.roominfo.toTime.substr(11, 5) : new Date().getHours() + \":\" + new Date().getMinutes(),\n      checkoutInfo: {\n        checkinTime: '',\n        checkoutTime: '',\n        roomClass: '',\n        totalOptionPrice: 0,\n        totalRoomPrice: 0,\n        totalPrice: 0,\n        CheckinTimeSelected: '',\n        CheckoutTimeSelected: ''\n      },\n      noteText: this.props.roominfo.noteText\n    };\n    ['checkinRoomSubmit', 'getStatusDes', 'onChangePickedTime', 'handleChangeTypeIDSelect', 'handleChangeOption', 'handleShowModal', 'handleHideModal', 'handleChangeInputDate', 'handleChangeInputTime', 'handleChangeInputCheckoutDate', 'handleChangeInputCheckoutTime', 'onChangePickedCheckoutTime', 'CheckoutRoom', 'getCheckoutInfo', 'checkoutRoomSubmit', 'disableCheckout'].forEach(method => this[method] = this[method].bind(this));\n  }\n\n  checkoutRoomSubmit() {\n    this.setState({\n      isSubmiting: true\n    });\n    let action = 'checkout';\n    let roomId = this.props.roominfo.roomid;\n    let id = this.props.roominfo.id;\n    let noteText = this.state.noteText;\n    let checkinTime = '';\n    let checkoutTime = '';\n\n    if (isMobile.iOS()) {\n      checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n      checkoutTime = this.state.CheckoutDate + \" \" + this.state.CheckoutTime;\n    } else {\n      checkinTime = this.state.CheckinTimeSelected;\n      checkoutTime = this.state.CheckoutTimeSelected;\n    }\n\n    let roomClass = this.state.roomCurrentClass;\n    let options = JSON.stringify(this.state.optionListSelected);\n    let totalOptionPrice = 0;\n\n    for (let i = 0; i < this.state.optionListSelected.length; i++) {\n      totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n    }\n\n    let totalRoomPrice = this.state.checkoutInfo.totalRoomPrice;\n    let totalPrice = this.state.checkoutInfo.totalPrice;\n\n    if (!checkinTime) {\n      toast.error('Bạn chưa chọn giờ vào!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    if (!checkoutTime) {\n      toast.error('Bạn chưa chọn giờ ra!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    if (!roomClass) {\n      toast.error('Bạn chưa chọn loại phòng!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    this.props.CheckoutSubmitRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, action, checkoutTime, totalRoomPrice, totalPrice, noteText);\n  }\n\n  async checkinRoomSubmit() {\n    this.setState({\n      isSubmiting: true\n    });\n    let action = 'checkin';\n    let roomId = this.props.roominfo.roomid;\n    let id = this.props.roominfo.id;\n    let noteText = this.state.noteText;\n    let checkinTime = '';\n\n    if (isMobile.iOS()) {\n      checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n      console.log(checkinTime);\n    } else {\n      checkinTime = this.state.CheckinTimeSelected;\n    }\n\n    let roomClass = this.state.roomCurrentClass;\n    let options = JSON.stringify(this.state.optionListSelected);\n    let totalOptionPrice = 0;\n\n    for (let i = 0; i < this.state.optionListSelected.length; i++) {\n      totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n    }\n\n    if (!checkinTime) {\n      toast.error('Bạn chưa chọn giờ vào!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    if (!roomClass) {\n      toast.error('Bạn chưa chọn loại phòng!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    await this.props.UpdateCheckInRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, noteText); // await sleep(5000);\n\n    this.setState({\n      roomDetailOpen: false,\n      isSubmiting: false\n    });\n  }\n\n  getStatusDes(status = '') {\n    let stt = this.props.statusList;\n\n    for (var i = 0; i < stt.length; i++) {\n      if (stt[i].key == status) {\n        return stt[i].text;\n      }\n    }\n  }\n\n  disableCheckout() {\n    let checkoutInfo = _objectSpread({}, this.state.checkoutInfo);\n\n    checkoutInfo.totalPrice = 0;\n    this.setState({\n      checkoutInfo: checkoutInfo\n    });\n  }\n\n  onChangePickedTime(val) {\n    this.disableCheckout();\n    this.setState({\n      CheckinTimeSelected: val\n    });\n  }\n\n  onChangePickedCheckoutTime(val) {\n    this.disableCheckout();\n    this.setState({\n      CheckoutTimeSelected: val\n    });\n  }\n\n  handleChangeTypeIDSelect(event, val = null) {\n    if (val == null) return;\n    this.disableCheckout();\n    this.setState({\n      roomCurrentClass: val['value']\n    });\n  }\n\n  handleChangeOption(data = []) {\n    let checkoutInfo = _objectSpread({}, this.state.checkoutInfo);\n\n    let total = 0;\n\n    for (var i = 0; i < data.length; i++) {\n      total = total + data[i].total;\n    }\n\n    checkoutInfo['totalPrice'] = checkoutInfo[\"totalRoomPrice\"] + total;\n    this.setState({\n      optionListSelected: data,\n      checkoutInfo: checkoutInfo\n    });\n  }\n\n  handleShowModal() {\n    this.setState({\n      roomDetailOpen: true\n    });\n  }\n\n  handleHideModal() {\n    this.setState({\n      roomDetailOpen: false\n    });\n  }\n\n  handleChangeInputDate(val, data) {\n    this.disableCheckout();\n    this.setState({\n      CheckinDate: data.value\n    });\n  }\n\n  handleChangeInputCheckoutDate(val, data) {\n    this.disableCheckout();\n    this.setState({\n      CheckoutDate: data.value\n    });\n  }\n\n  handleChangeInputCheckoutTime(val, data) {\n    this.disableCheckout();\n    this.setState({\n      CheckoutTime: data.value\n    });\n  }\n\n  handleChangeInputTime(val, data) {\n    this.disableCheckout();\n    this.setState({\n      CheckinTime: data.value\n    });\n  }\n\n  getCheckoutInfo() {\n    this.setState({\n      isSubmiting: true\n    });\n    let action = 'getTotalConfirm';\n    let roomId = this.props.roominfo.roomid;\n    let id = this.props.roominfo.id;\n    let checkinTime = '';\n    let checkoutTime = '';\n\n    if (isMobile.iOS()) {\n      checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n      checkoutTime = this.state.CheckoutDate + \" \" + this.state.CheckoutTime;\n    } else {\n      checkinTime = this.state.CheckinTimeSelected;\n      checkoutTime = this.state.CheckoutTimeSelected;\n    }\n\n    let roomClass = this.state.roomCurrentClass;\n    let options = JSON.stringify(this.state.optionListSelected);\n    let totalOptionPrice = 0;\n\n    for (let i = 0; i < this.state.optionListSelected.length; i++) {\n      totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n    }\n\n    if (!checkinTime) {\n      toast.error('Bạn chưa chọn giờ vào!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    if (!checkoutTime) {\n      toast.error('Bạn chưa chọn giờ ra!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    if (checkinTime > checkoutTime) {\n      toast.error('Giờ ra phải sau giờ vào!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    if (!roomClass) {\n      toast.error('Bạn chưa chọn loại phòng!');\n      this.setState({\n        isSubmiting: false\n      });\n      return;\n    }\n\n    this.CheckoutRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, action, checkoutTime);\n  }\n\n  async CheckoutRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, action, checkoutTime) {\n    let formatted_date = '';\n    let formattedcheckout_date = '';\n\n    if (isMobile.iOS()) {\n      formatted_date = checkinTime;\n      formattedcheckout_date = checkoutTime;\n    } else {\n      let current_datetime = checkinTime;\n      let current_Checkoutdatetime = checkoutTime;\n      formatted_date = current_datetime.getFullYear() + \"-\" + (current_datetime.getMonth() + 1) + \"-\" + current_datetime.getDate() + \" \" + current_datetime.getHours() + \":\" + current_datetime.getMinutes() + \":\" + current_datetime.getSeconds();\n      formattedcheckout_date = current_Checkoutdatetime.getFullYear() + \"-\" + (current_Checkoutdatetime.getMonth() + 1) + \"-\" + current_Checkoutdatetime.getDate() + \" \" + current_Checkoutdatetime.getHours() + \":\" + current_Checkoutdatetime.getMinutes() + \":\" + current_Checkoutdatetime.getSeconds();\n    } // console.log(formatted_date);\n    // console.log(formattedcheckout_date);\n\n\n    let encoded = \"checkinTime=\" + formatted_date + \"&roomClass=\" + roomClass + \"&options=\" + options + \"&totalOptionPrice=\" + totalOptionPrice + \"&checkoutTime=\" + formattedcheckout_date;\n    let result = '';\n\n    if (action == \"getTotalConfirm\") {\n      await fetch('https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=checkoutinfo', {\n        method: 'POST',\n        body: encoded,\n        headers: {\n          \"Content-type\": \"application/x-www-form-urlencoded\"\n        }\n      }).then(async function (response) {\n        let msgerr = '';\n        await response.json().then(function (data) {\n          data['result'] == 'error' ? msgerr = JSON.stringify(data[\"error\"][\"message\"]) : result = data['data'];\n        });\n        let stt = response.status;\n\n        if (stt == 200) {\n          if (!msgerr) {\n            console.log(result);\n          } else {\n            toast.error(\"Error:\" + JSON.stringify(msgerr));\n          }\n        } else {\n          toast.error(\"Something is wrong, please check log for detail!\");\n        }\n      }).then(() => {\n        this.setState({\n          checkoutInfo: {\n            checkinTime: checkinTime,\n            checkoutTime: checkoutTime,\n            roomClass: roomClass,\n            totalOptionPrice: totalOptionPrice,\n            totalRoomPrice: result['roomPrice'],\n            totalPrice: result['totalPrice'],\n            CheckinTimeSelected: formatted_date,\n            CheckoutTimeSelected: formattedcheckout_date\n          },\n          isSubmiting: false\n        });\n      });\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          roominfo = _this$props.roominfo,\n          roomTypeOther = _this$props.roomTypeOther;\n    let imgsrc = roominfo.roomid ? 'images/room' + roominfo.roomid + '.png' : 'images/room101.png';\n    return React.createElement(Modal, {\n      style: {\n        width: '100%'\n      },\n      open: this.state.roomDetailOpen,\n      closeIcon: true,\n      onClose: () => {\n        this.setState({\n          roomDetailOpen: false\n        });\n      },\n      trigger: React.createElement(\"a\", {\n        className: \"image fit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          boxShadow: '10px 10px 5px #ccc'\n        },\n        onClick: this.handleShowModal,\n        src: \"images/hotelico.jpeg\",\n        alt: \"Hotel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435\n      },\n      __self: this\n    }, React.createElement(Statistic, {\n      style: {\n        marginLeft: '30%'\n      },\n      horizontal: true,\n      size: \"tiny\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    }, React.createElement(Statistic.Value, {\n      style: {\n        color: \"#00bfff\",\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437\n      },\n      __self: this\n    }, formatNumber(this.state.checkoutInfo.totalPrice)), React.createElement(Statistic.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441\n      },\n      __self: this\n    }, \"vnd\")), \".\"), React.createElement(Modal.Content, {\n      image: true,\n      scrolling: true,\n      style: {\n        height: '450%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    }, React.createElement(Image, {\n      size: \"large\",\n      src: imgsrc,\n      wrapped: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446\n      },\n      __self: this\n    }, React.createElement(TextArea, {\n      placeholder: \"Ghi ch\\xFA...\",\n      style: {\n        minHeight: 100\n      },\n      value: this.state.noteText,\n      onChange: (event, data) => {\n        this.setState({\n          noteText: data.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447\n      },\n      __self: this\n    }))), React.createElement(Modal.Description, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454\n      },\n      __self: this\n    }, roominfo.roomDescription), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }, \"Status: \", this.getStatusDes(roominfo.status)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460\n      },\n      __self: this\n    }, \"Checkin:\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    }, !isMobile.iOS() ? React.createElement(DateTimePicker, {\n      value: this.state.CheckinTimeSelected,\n      onChange: this.onChangePickedTime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }, React.createElement(Input, {\n      size: \"huge\",\n      style: {\n        width: '50%'\n      },\n      onChange: this.handleChangeInputDate,\n      value: this.state.CheckinDate,\n      type: \"date\",\n      name: \"CheckinDate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }), React.createElement(Input, {\n      size: \"huge\",\n      style: {\n        width: '50%'\n      },\n      onChange: this.handleChangeInputTime,\n      value: this.state.CheckinTime,\n      type: \"time\",\n      name: \"CheckinTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469\n      },\n      __self: this\n    }))), React.createElement(Segment, {\n      padded: true,\n      style: {\n        display: this.props.roominfo.status == 0 ? '' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      style: {\n        color: \"#00bfff\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477\n      },\n      __self: this\n    }, \"CheckOut:\")), !isMobile.iOS() ? React.createElement(DateTimePicker, {\n      value: this.state.CheckoutTimeSelected,\n      onChange: this.onChangePickedCheckoutTime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    }) : React.createElement(\"div\", {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481\n      },\n      __self: this\n    }, React.createElement(Input, {\n      size: \"huge\",\n      style: {\n        width: '50%'\n      },\n      onChange: this.handleChangeInputCheckoutDate,\n      value: this.state.CheckoutDate,\n      type: \"date\",\n      name: \"CheckoutDate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481\n      },\n      __self: this\n    }), React.createElement(Input, {\n      size: \"huge\",\n      style: {\n        width: '50%'\n      },\n      onChange: this.handleChangeInputCheckoutTime,\n      value: this.state.CheckoutTime,\n      type: \"time\",\n      name: \"CheckoutTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490\n      },\n      __self: this\n    }), React.createElement(Button, {\n      primary: true,\n      style: {\n        float: 'left',\n        width: '45%'\n      },\n      size: \"large\",\n      onClick: this.getCheckoutInfo,\n      disabled: this.state.isSubmiting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491\n      },\n      __self: this\n    }, \"Check Price:\"), this.state.isSubmiting ? React.createElement(Input, {\n      size: \"large\",\n      loading: true,\n      icon: \"user\",\n      disabled: true,\n      value: formatNumber(this.state.checkoutInfo.totalRoomPrice),\n      label: {\n        basic: true,\n        content: 'vnd'\n      },\n      labelPosition: \"right\",\n      iconPosition: \"left\",\n      style: {\n        width: \"40%\"\n      },\n      placeholder: \"Search...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496\n      },\n      __self: this\n    }) : React.createElement(Input, {\n      size: \"large\",\n      icon: \"money bill alternate outline\",\n      disabled: true,\n      value: formatNumber(this.state.checkoutInfo.totalRoomPrice),\n      label: {\n        basic: true,\n        content: 'vnd'\n      },\n      labelPosition: \"right\",\n      iconPosition: \"left\",\n      style: {\n        width: \"40%\"\n      },\n      placeholder: \"Search...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502\n      },\n      __self: this\n    }))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513\n      },\n      __self: this\n    }, \"Room Type:\")), React.createElement(Form.Select, {\n      fluid: true,\n      icon: \"\",\n      size: \"huge\" // label='Room Type:'\n      ,\n      value: this.state.roomCurrentClass,\n      options: roomTypeOther,\n      onChange: this.handleChangeTypeIDSelect,\n      placeholder: \"Type\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515\n      },\n      __self: this\n    })), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526\n      },\n      __self: this\n    }), React.createElement(Label, {\n      as: \"a\",\n      color: \"teal\",\n      ribbon: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    }, \"Th\\xEAm S\\u1EA3n Ph\\u1EA9m:\"), React.createElement(ListOption, {\n      listoptionIds: this.props.listoptionIds,\n      listoption: this.props.listoption,\n      onChangeOption: this.handleChangeOption,\n      optionListSelected: this.state.optionListSelected ? this.state.optionListSelected : [],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530\n      },\n      __self: this\n    }))), React.createElement(Modal.Actions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536\n      },\n      __self: this\n    }, React.createElement(Button, {\n      primary: true,\n      onClick: this.show,\n      disabled: this.state.isSubmiting || this.state.checkoutInfo.totalPrice == 0,\n      style: {\n        display: this.props.roominfo.status == 0 ? '' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537\n      },\n      __self: this\n    }, \"CheckOut\"), React.createElement(Button, {\n      primary: true,\n      onClick: this.checkinRoomSubmit,\n      disabled: this.state.isSubmiting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542\n      },\n      __self: this\n    }, this.props.roominfo.status == 1 ? \"CheckIn\" : \"Update\"), React.createElement(Button, {\n      primary: true,\n      onClick: this.handleHideModal,\n      disabled: this.state.isSubmiting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545\n      },\n      __self: this\n    }, \"Close\")), React.createElement(Confirm, {\n      open: this.state.open,\n      content: this.state.isSubmiting ? React.createElement(Dimmer, {\n        active: true,\n        inverted: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552\n        },\n        __self: this\n      }, React.createElement(Loader, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }, \"H\\u1EC7 th\\u1ED1ng \\u0111ang x\\u1EED l\\xFD.\")) : React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560\n        },\n        __self: this\n      }, !isMobile.iOS() ? [React.createElement(\"tr\", {\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563\n        },\n        __self: this\n      }, \"Gi\\u1EDD v\\xE0o:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564\n        },\n        __self: this\n      }, this.state.checkoutInfo.CheckinTimeSelected)), React.createElement(\"tr\", {\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567\n        },\n        __self: this\n      }, \"Gi\\u1EDD ra:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 568\n        },\n        __self: this\n      }, this.state.checkoutInfo.CheckoutTimeSelected))] : [React.createElement(\"tr\", {\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572\n        },\n        __self: this\n      }, \"Gi\\u1EDD v\\xE0o:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573\n        },\n        __self: this\n      }, this.state.checkoutInfo.CheckinTimeSelected)), React.createElement(\"tr\", {\n        key: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576\n        },\n        __self: this\n      }, \"Gi\\u1EDD ra:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577\n        },\n        __self: this\n      }, this.state.checkoutInfo.CheckoutTimeSelected))], React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581\n        },\n        __self: this\n      }, \"Ti\\u1EC1n \\u1EDF:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 582\n        },\n        __self: this\n      }, formatNumber(this.state.checkoutInfo.totalRoomPrice))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585\n        },\n        __self: this\n      }, \"Ti\\u1EC1n kh\\xE1c:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586\n        },\n        __self: this\n      }, formatNumber(this.state.checkoutInfo.totalPrice - this.state.checkoutInfo.totalRoomPrice))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 588\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 589\n        },\n        __self: this\n      }, \"T\\u1ED5ng ti\\u1EC1n:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 590\n        },\n        __self: this\n      }, formatNumber(this.state.checkoutInfo.totalPrice)))))))),\n      header: \"Confirm CheckOut\",\n      onCancel: this.handleCancel,\n      onConfirm: this.checkoutRoomSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549\n      },\n      __self: this\n    }));\n  }\n\n}\nRoomDetailCheckin.propTypes = {\n  roominfo: PropTypes.object,\n  statusList: PropTypes.array,\n  roomTypeOther: PropTypes.array,\n  listoptionIds: PropTypes.array,\n  listoption: PropTypes.array,\n  UpdateCheckInRoom: PropTypes.func,\n  CheckoutSubmitRoom: PropTypes.func\n};","map":{"version":3,"sources":["/Users/bangth/Desktop/TBHotel/src/components/RoomDetailCheckin.js"],"names":["React","Button","Form","Header","Image","Input","Label","Modal","Segment","Statistic","TextArea","Confirm","Loader","Dimmer","PropTypes","Moment","momentLocalizer","DateTimePicker","ListOption","ConfirmFinalMessage","toast","ListRoomRows","locale","formatNumber","num","toString","replace","isMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","RoomDetailCheckin","Component","constructor","props","show","setState","open","handleConfirm","handleCancel","state","CheckinTimeSelected","roominfo","fromTime","Date","CheckoutTimeSelected","toTime","roomCurrentClass","optionListSelected","moreOptionId","JSON","parse","roomDetailOpen","isSubmiting","CheckinDate","substr","getFullYear","getMonth","getDate","CheckinTime","getHours","getMinutes","CheckoutDate","CheckoutTime","checkoutInfo","checkinTime","checkoutTime","roomClass","totalOptionPrice","totalRoomPrice","totalPrice","noteText","forEach","method","bind","checkoutRoomSubmit","action","roomId","roomid","id","options","stringify","i","length","total","error","CheckoutSubmitRoom","checkinRoomSubmit","console","log","UpdateCheckInRoom","getStatusDes","status","stt","statusList","key","text","disableCheckout","onChangePickedTime","val","onChangePickedCheckoutTime","handleChangeTypeIDSelect","event","handleChangeOption","data","handleShowModal","handleHideModal","handleChangeInputDate","value","handleChangeInputCheckoutDate","handleChangeInputCheckoutTime","handleChangeInputTime","getCheckoutInfo","CheckoutRoom","formatted_date","formattedcheckout_date","current_datetime","current_Checkoutdatetime","getSeconds","encoded","result","fetch","body","headers","then","response","msgerr","json","render","roomTypeOther","imgsrc","width","boxShadow","marginLeft","color","fontWeight","height","minHeight","roomDescription","display","float","basic","content","listoptionIds","listoption","textAlign","propTypes","object","array","func"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {\n    Button,\n    Form,\n    Header,\n    Image,\n    Input,\n    Label,\n    Modal,\n    Segment,\n    Statistic,\n    TextArea,\n    Confirm, Loader, Dimmer\n} from 'semantic-ui-react'\nimport PropTypes from \"prop-types\";\nimport Moment from 'moment'\nimport momentLocalizer from 'react-widgets-moment';\nimport DateTimePicker from 'react-widgets/lib/DateTimePicker';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport {ListOption} from '../components/ListOption';\nimport {ConfirmFinalMessage} from '../components/ConfirmFinalMessage';\nimport 'semantic-ui-css/semantic.min.css';\nimport {toast} from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../App.css';\nimport {ListRoomRows} from \"./ListRoomRows\";\n\nMoment.locale('vn')\nmomentLocalizer()\n\nfunction formatNumber(num) {\n    return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n}\n\nconst isMobile = {\n    Android: function () {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function () {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function () {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function () {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function () {\n        return navigator.userAgent.match(/IEMobile/i);\n    },\n    any: function () {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n};\n\nexport class RoomDetailCheckin extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: false,\n            CheckinTimeSelected: (this.props.roominfo.fromTime ? new Date(this.props.roominfo.fromTime.replace(/[A-Za-z]/g, ' ')) : new Date()),\n            CheckoutTimeSelected: (this.props.roominfo.toTime ? new Date(this.props.roominfo.toTime.replace(/[A-Za-z]/g, ' ')) : new Date()),\n            roomCurrentClass: (this.props.roominfo.roomCurrentClass ? this.props.roominfo.roomCurrentClass : ''),\n            optionListSelected: (this.props.roominfo.moreOptionId ? JSON.parse(this.props.roominfo.moreOptionId) : ''),\n            roomDetailOpen: false,\n            isSubmiting: false,\n            CheckinDate: (this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(0, 10) : ((new Date()).getFullYear() + \"-\" + ((new Date()).getMonth() + 1) + \"-\" + (new Date()).getDate())),\n            CheckinTime: (this.props.roominfo.fromTime ? this.props.roominfo.fromTime.substr(11, 5) : ((new Date()).getHours() + \":\" + ((new Date()).getMinutes()))),\n            CheckoutDate: (this.props.roominfo.toTime ? this.props.roominfo.toTime.substr(0, 10) : ((new Date()).getFullYear() + \"-\" + ((new Date()).getMonth() + 1) + \"-\" + (new Date()).getDate())),\n            CheckoutTime: (this.props.roominfo.toTime ? this.props.roominfo.toTime.substr(11, 5) : ((new Date()).getHours() + \":\" + ((new Date()).getMinutes()))),\n            checkoutInfo: {\n                checkinTime: '',\n                checkoutTime: '',\n                roomClass: '',\n                totalOptionPrice: 0,\n                totalRoomPrice: 0,\n                totalPrice: 0,\n                CheckinTimeSelected: '',\n                CheckoutTimeSelected: '',\n            },\n            noteText: this.props.roominfo.noteText,\n        };\n\n        [\n            'checkinRoomSubmit',\n            'getStatusDes',\n            'onChangePickedTime',\n            'handleChangeTypeIDSelect',\n            'handleChangeOption',\n            'handleShowModal',\n            'handleHideModal',\n            'handleChangeInputDate',\n            'handleChangeInputTime',\n            'handleChangeInputCheckoutDate',\n            'handleChangeInputCheckoutTime',\n            'onChangePickedCheckoutTime',\n            'CheckoutRoom',\n            'getCheckoutInfo',\n            'checkoutRoomSubmit',\n            'disableCheckout'\n        ].forEach((method) => this[method] = this[method].bind(this));\n    }\n\n    show = () => this.setState({open: true})\n    handleConfirm = () => this.setState({open: false})\n    handleCancel = () => this.setState({open: false})\n\n    checkoutRoomSubmit() {\n        this.setState({\n            isSubmiting: true,\n        });\n        let action = 'checkout';\n        let roomId = this.props.roominfo.roomid;\n        let id = this.props.roominfo.id;\n        let noteText = this.state.noteText;\n        let checkinTime = '';\n        let checkoutTime = '';\n        if (isMobile.iOS()) {\n            checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n            checkoutTime = this.state.CheckoutDate + \" \" + this.state.CheckoutTime;\n        } else {\n            checkinTime = this.state.CheckinTimeSelected;\n            checkoutTime = this.state.CheckoutTimeSelected;\n        }\n        let roomClass = this.state.roomCurrentClass;\n        let options = JSON.stringify(this.state.optionListSelected);\n\n        let totalOptionPrice = 0;\n        for (let i = 0; i < this.state.optionListSelected.length; i++) {\n            totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n        }\n\n        let totalRoomPrice = this.state.checkoutInfo.totalRoomPrice;\n        let totalPrice = this.state.checkoutInfo.totalPrice;\n\n        if (!checkinTime) {\n            toast.error('Bạn chưa chọn giờ vào!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n        if (!checkoutTime) {\n            toast.error('Bạn chưa chọn giờ ra!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n        if (!roomClass) {\n            toast.error('Bạn chưa chọn loại phòng!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n\n        this.props.CheckoutSubmitRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, action, checkoutTime, totalRoomPrice, totalPrice, noteText);\n    }\n\n    async checkinRoomSubmit() {\n        this.setState({\n            isSubmiting: true\n        });\n        let action = 'checkin';\n        let roomId = this.props.roominfo.roomid;\n        let id = this.props.roominfo.id;\n        let noteText = this.state.noteText;\n\n        let checkinTime = '';\n        if (isMobile.iOS()) {\n            checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n            console.log(checkinTime)\n        } else {\n            checkinTime = this.state.CheckinTimeSelected;\n        }\n        let roomClass = this.state.roomCurrentClass;\n        let options = JSON.stringify(this.state.optionListSelected);\n\n        let totalOptionPrice = 0;\n        for (let i = 0; i < this.state.optionListSelected.length; i++) {\n            totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n        }\n\n        if (!checkinTime) {\n            toast.error('Bạn chưa chọn giờ vào!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n        if (!roomClass) {\n            toast.error('Bạn chưa chọn loại phòng!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n\n        await this.props.UpdateCheckInRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, noteText);\n        // await sleep(5000);\n        this.setState({\n            roomDetailOpen: false,\n            isSubmiting: false\n        });\n    }\n\n    getStatusDes(status = '') {\n        let stt = this.props.statusList;\n        for (var i = 0; i < stt.length; i++) {\n            if (stt[i].key == status) {\n                return stt[i].text;\n            }\n        }\n    }\n\n    disableCheckout() {\n        let checkoutInfo = {...this.state.checkoutInfo};\n        checkoutInfo.totalPrice = 0;\n        this.setState({\n            checkoutInfo: checkoutInfo\n        });\n    }\n\n    onChangePickedTime(val) {\n        this.disableCheckout();\n        this.setState({\n            CheckinTimeSelected: val\n        });\n    }\n\n    onChangePickedCheckoutTime(val) {\n        this.disableCheckout();\n        this.setState({\n            CheckoutTimeSelected: val\n        });\n    }\n\n    handleChangeTypeIDSelect(event, val = null) {\n        if (val == null)\n            return;\n        this.disableCheckout();\n        this.setState({\n            roomCurrentClass: val['value']\n        });\n    }\n\n    handleChangeOption(data = []) {\n        let checkoutInfo = {...this.state.checkoutInfo};\n        let total = 0;\n        for (var i = 0; i < data.length; i++) {\n            total = total + data[i].total;\n        }\n        checkoutInfo['totalPrice'] = checkoutInfo[\"totalRoomPrice\"] + total;\n        this.setState({\n            optionListSelected: data,\n            checkoutInfo: checkoutInfo\n        });\n    }\n\n    handleShowModal() {\n        this.setState({\n            roomDetailOpen: true\n        });\n    }\n\n    handleHideModal() {\n        this.setState({\n            roomDetailOpen: false\n        });\n    }\n\n    handleChangeInputDate(val, data) {\n        this.disableCheckout();\n        this.setState({\n            CheckinDate: data.value\n        });\n    }\n\n    handleChangeInputCheckoutDate(val, data) {\n        this.disableCheckout();\n        this.setState({\n            CheckoutDate: data.value\n        });\n    }\n\n    handleChangeInputCheckoutTime(val, data) {\n        this.disableCheckout();\n        this.setState({\n            CheckoutTime: data.value\n        });\n    }\n\n    handleChangeInputTime(val, data) {\n        this.disableCheckout();\n        this.setState({\n            CheckinTime: data.value\n        });\n    }\n\n    getCheckoutInfo() {\n        this.setState({\n            isSubmiting: true,\n        });\n        let action = 'getTotalConfirm';\n        let roomId = this.props.roominfo.roomid;\n        let id = this.props.roominfo.id;\n        let checkinTime = '';\n        let checkoutTime = '';\n        if (isMobile.iOS()) {\n            checkinTime = this.state.CheckinDate + \" \" + this.state.CheckinTime;\n            checkoutTime = this.state.CheckoutDate + \" \" + this.state.CheckoutTime;\n        } else {\n            checkinTime = this.state.CheckinTimeSelected;\n            checkoutTime = this.state.CheckoutTimeSelected;\n        }\n        let roomClass = this.state.roomCurrentClass;\n        let options = JSON.stringify(this.state.optionListSelected);\n\n        let totalOptionPrice = 0;\n        for (let i = 0; i < this.state.optionListSelected.length; i++) {\n            totalOptionPrice = totalOptionPrice + this.state.optionListSelected[i].total;\n        }\n\n        if (!checkinTime) {\n            toast.error('Bạn chưa chọn giờ vào!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n        if (!checkoutTime) {\n            toast.error('Bạn chưa chọn giờ ra!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n\n        if (checkinTime > checkoutTime) {\n            toast.error('Giờ ra phải sau giờ vào!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n\n        if (!roomClass) {\n            toast.error('Bạn chưa chọn loại phòng!');\n            this.setState({\n                isSubmiting: false\n            });\n            return;\n        }\n\n        this.CheckoutRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, action, checkoutTime);\n    }\n\n    async CheckoutRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, action, checkoutTime) {\n        let formatted_date = '';\n        let formattedcheckout_date = '';\n        if (isMobile.iOS()) {\n            formatted_date = checkinTime;\n            formattedcheckout_date = checkoutTime;\n        } else {\n            let current_datetime = checkinTime;\n            let current_Checkoutdatetime = checkoutTime;\n            formatted_date = current_datetime.getFullYear() + \"-\" + (current_datetime.getMonth() + 1) + \"-\" + current_datetime.getDate() + \" \" + current_datetime.getHours() + \":\" + current_datetime.getMinutes() + \":\" + current_datetime.getSeconds();\n            formattedcheckout_date = current_Checkoutdatetime.getFullYear() + \"-\" + (current_Checkoutdatetime.getMonth() + 1) + \"-\" + current_Checkoutdatetime.getDate() + \" \" + current_Checkoutdatetime.getHours() + \":\" + current_Checkoutdatetime.getMinutes() + \":\" + current_Checkoutdatetime.getSeconds();\n        }\n\n        // console.log(formatted_date);\n        // console.log(formattedcheckout_date);\n\n        let encoded = \"checkinTime=\" + formatted_date +\n            \"&roomClass=\" + roomClass +\n            \"&options=\" + options +\n            \"&totalOptionPrice=\" + totalOptionPrice +\n            \"&checkoutTime=\" + formattedcheckout_date;\n        let result = '';\n        if (action == \"getTotalConfirm\") {\n            await fetch('https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=checkoutinfo', {\n                method: 'POST',\n                body: encoded,\n                headers: {\n                    \"Content-type\": \"application/x-www-form-urlencoded\"\n                }\n            }).then(async function (response) {\n                let msgerr = '';\n\n                await response.json().then(function (data) {\n                    data['result'] == 'error' ? msgerr = JSON.stringify(data[\"error\"][\"message\"]) : result = data['data'];\n                });\n                let stt = response.status;\n                if (stt == 200) {\n                    if (!msgerr) {\n                        console.log(result);\n                    } else {\n                        toast.error(\"Error:\" + JSON.stringify(msgerr));\n                    }\n                } else {\n                    toast.error(\"Something is wrong, please check log for detail!\");\n                }\n\n            }).then(() => {\n                this.setState({\n                    checkoutInfo: {\n                        checkinTime: checkinTime,\n                        checkoutTime: checkoutTime,\n                        roomClass: roomClass,\n                        totalOptionPrice: totalOptionPrice,\n                        totalRoomPrice: result['roomPrice'],\n                        totalPrice: result['totalPrice'],\n                        CheckinTimeSelected: formatted_date,\n                        CheckoutTimeSelected: formattedcheckout_date,\n                    },\n                    isSubmiting: false\n                });\n            })\n        }\n    }\n\n    render() {\n        const {roominfo, roomTypeOther} = this.props;\n        let imgsrc = roominfo.roomid ? 'images/room' + roominfo.roomid + '.png' : 'images/room101.png';\n\n        return (\n            <Modal style={{width: '100%'}} open={this.state.roomDetailOpen} closeIcon\n                   onClose={() => {\n                       this.setState({roomDetailOpen: false})\n                   }}\n                   trigger={<a className=\"image fit\"><img style={{boxShadow: '10px 10px 5px #ccc'}}\n                                                          onClick={this.handleShowModal}\n                                                          src=\"images/hotelico.jpeg\" alt=\"Hotel\"/></a>}>\n                <Modal.Header>\n                    <Statistic style={{marginLeft: '30%'}} horizontal size='tiny'>\n                        <Statistic.Value style={{\n                            color: \"#00bfff\",\n                            fontWeight: 'bold'\n                        }}>{formatNumber(this.state.checkoutInfo.totalPrice)}</Statistic.Value>\n                        <Statistic.Label>vnd</Statistic.Label>\n                    </Statistic>.\n                </Modal.Header>\n                <Modal.Content image scrolling style={{height: '450%'}}>\n                    <Image size='large' src={imgsrc} wrapped>\n                        <Form>\n                            <TextArea placeholder='Ghi chú...' style={{minHeight: 100}}\n                                      value={this.state.noteText} onChange={(event, data) => {\n                                this.setState({noteText: data.value})\n                            }}/>\n                        </Form>\n                    </Image>\n                    <Modal.Description style={{width: '100%'}}>\n                        <Header>{roominfo.roomDescription}</Header>\n                        <b>\n                            Status: {this.getStatusDes(roominfo.status)}\n                        </b>\n                        <hr/>\n                        <label>\n                            <b>Checkin:</b>\n                        </label>\n                        <div>\n                            {!isMobile.iOS() ? <DateTimePicker value={this.state.CheckinTimeSelected}\n                                                               onChange={this.onChangePickedTime}/> :\n                                <div style={{width: '100%'}}><Input size='huge' style={{width: '50%'}}\n                                                                    onChange={this.handleChangeInputDate}\n                                                                    value={this.state.CheckinDate} type=\"date\"\n                                                                    name=\"CheckinDate\"/>\n                                    <Input size='huge' style={{width: '50%'}} onChange={this.handleChangeInputTime}\n                                           value={this.state.CheckinTime} type=\"time\" name=\"CheckinTime\"/>\n                                </div>\n                            }\n                        </div>\n                        <Segment padded style={{display: this.props.roominfo.status == 0 ? '' : 'none'}}>\n                            <div>\n                                <label>\n                                    <b style={{color: \"#00bfff\"}}>CheckOut:</b>\n                                </label>\n                                {!isMobile.iOS() ? <DateTimePicker value={this.state.CheckoutTimeSelected}\n                                                                   onChange={this.onChangePickedCheckoutTime}/> :\n                                    <div style={{width: '100%'}}><Input size='huge' style={{width: '50%'}}\n                                                                        onChange={this.handleChangeInputCheckoutDate}\n                                                                        value={this.state.CheckoutDate} type=\"date\"\n                                                                        name=\"CheckoutDate\"/>\n                                        <Input size='huge' style={{width: '50%'}}\n                                               onChange={this.handleChangeInputCheckoutTime}\n                                               value={this.state.CheckoutTime} type=\"time\" name=\"CheckoutTime\"/>\n                                    </div>\n                                }\n                                <br/>\n                                <Button primary style={{float: 'left', width: '45%'}} size=\"large\"\n                                        onClick={this.getCheckoutInfo} disabled={this.state.isSubmiting}>\n                                    Check Price:\n                                </Button>\n                                {this.state.isSubmiting ?\n                                    <Input size='large' loading icon='user' disabled\n                                           value={formatNumber(this.state.checkoutInfo.totalRoomPrice)}\n                                           label={{basic: true, content: 'vnd'}}\n                                           labelPosition='right'\n                                           iconPosition='left' style={{width: \"40%\"}} placeholder='Search...'/>\n                                    :\n                                    <Input size=\"large\" icon='money bill alternate outline' disabled\n                                           value={formatNumber(this.state.checkoutInfo.totalRoomPrice)}\n                                           label={{basic: true, content: 'vnd'}}\n                                           labelPosition='right'\n                                           iconPosition='left' style={{width: \"40%\"}} placeholder='Search...'/>\n                                }\n                            </div>\n                        </Segment>\n                        <hr/>\n                        <div>\n                            <label>\n                                <b>Room Type:</b>\n                            </label>\n                            <Form.Select\n                                fluid\n                                icon=''\n                                size=\"huge\"\n                                // label='Room Type:'\n                                value={this.state.roomCurrentClass}\n                                options={roomTypeOther}\n                                onChange={this.handleChangeTypeIDSelect}\n                                placeholder='Type'\n                            />\n                        </div>\n                        <hr/>\n                        <Label as='a' color='teal' ribbon>\n                            Thêm Sản Phẩm:\n                        </Label>\n                        <ListOption listoptionIds={this.props.listoptionIds}\n                                    listoption={this.props.listoption}\n                                    onChangeOption={this.handleChangeOption}\n                                    optionListSelected={this.state.optionListSelected ? this.state.optionListSelected : []}/>\n                    </Modal.Description>\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button primary onClick={this.show}\n                            disabled={this.state.isSubmiting || this.state.checkoutInfo.totalPrice == 0}\n                            style={{display: (this.props.roominfo.status == 0 ? '' : 'none')}}>\n                        CheckOut\n                    </Button>\n                    <Button primary onClick={this.checkinRoomSubmit} disabled={this.state.isSubmiting}>\n                        {this.props.roominfo.status == 1 ? \"CheckIn\" : \"Update\"}\n                    </Button>\n                    <Button primary onClick={this.handleHideModal} disabled={this.state.isSubmiting}>\n                        Close\n                    </Button>\n                </Modal.Actions>\n                <Confirm\n                    open={this.state.open}\n                    content={this.state.isSubmiting ?\n                        <Dimmer active inverted>\n                            <Loader size='large'>Hệ thống đang xử lý.</Loader>\n                        </Dimmer>\n                        :\n                        <div style={{textAlign: 'center'}}>\n                            <Segment>\n                                <h3>\n                                    <table>\n                                        <tbody>\n                                        {!isMobile.iOS() ?\n                                            [<tr key='1'>\n                                                <td>Giờ vào:</td>\n                                                <td>{this.state.checkoutInfo.CheckinTimeSelected}</td>\n                                            </tr>,\n                                                <tr key='2'>\n                                                    <td>Giờ ra:</td>\n                                                    <td>{this.state.checkoutInfo.CheckoutTimeSelected}</td>\n                                                </tr>]\n                                            :\n                                            [<tr key='3'>\n                                                <td>Giờ vào:</td>\n                                                <td>{this.state.checkoutInfo.CheckinTimeSelected}</td>\n                                            </tr>,\n                                                <tr key='4'>\n                                                    <td>Giờ ra:</td>\n                                                    <td>{this.state.checkoutInfo.CheckoutTimeSelected}</td>\n                                                </tr>\n                                            ]}\n                                        <tr>\n                                            <td>Tiền ở:</td>\n                                            <td>{formatNumber(this.state.checkoutInfo.totalRoomPrice)}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Tiền khác:</td>\n                                            <td>{formatNumber((this.state.checkoutInfo.totalPrice - this.state.checkoutInfo.totalRoomPrice))}</td>\n                                        </tr>\n                                        <tr>\n                                            <td>Tổng tiền:</td>\n                                            <td>{formatNumber(this.state.checkoutInfo.totalPrice)}</td>\n                                        </tr>\n                                        </tbody>\n                                    </table>\n                                </h3>\n                            </Segment>\n                        </div>\n                    }\n                    header='Confirm CheckOut'\n                    onCancel={this.handleCancel}\n                    onConfirm={this.checkoutRoomSubmit}\n                />\n            </Modal>\n        );\n    }\n}\n\n\nRoomDetailCheckin.propTypes = {\n    roominfo: PropTypes.object,\n    statusList: PropTypes.array,\n    roomTypeOther: PropTypes.array,\n    listoptionIds: PropTypes.array,\n    listoption: PropTypes.array,\n    UpdateCheckInRoom: PropTypes.func,\n    CheckoutSubmitRoom: PropTypes.func\n}"]},"metadata":{},"sourceType":"module"}