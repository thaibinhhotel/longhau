{"ast":null,"code":"import _defineProperty from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bangth/Desktop/TBHotel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import ReactDOM from'react-dom';import{Form,Input,Image,Loader,Segment,Dimmer,Label}from'semantic-ui-react';import{ListRoomRows}from'../components/ListRoomRows';// import {SearchingTab} from '../components/SearchingTab';\nimport'semantic-ui-css/semantic.min.css';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'../App.css';import{encrypt}from'../components/sha256';var isMobile={Android:function Android(){return navigator.userAgent.match(/Android/i);},BlackBerry:function BlackBerry(){return navigator.userAgent.match(/BlackBerry/i);},iOS:function iOS(){return navigator.userAgent.match(/iPhone|iPad|iPod/i);},Opera:function Opera(){return navigator.userAgent.match(/Opera Mini/i);},Windows:function Windows(){return navigator.userAgent.match(/IEMobile/i);},any:function any(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows();}};export var IndexPage=/*#__PURE__*/function(_React$Component){_inherits(IndexPage,_React$Component);function IndexPage(props){var _this;_classCallCheck(this,IndexPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexPage).call(this,props));_this.state={isLoadedRooms:false,isLoadedParam:false,roomDetailOpen:false,rooms:[],roomIds:[],status:[],statusIds:[],roomTypeOther:[],roomTypeOtherIds:[],listoption:[],listoptionIds:[],roomidselected:'',statusSelected:''};['getListRoomDetails','UpdateCheckInRoom','handleChangeRoomIDSelect','handleChangeStatusIDSelect','getListStatus','renderSearchForm','renderListRooms','getroomTypeOther','getlistoption','handleClearSearching','CheckoutRoom','getIPAddress','sha256'].forEach(function(method){return _this[method]=_this[method].bind(_assertThisInitialized(_this));});return _this;}_createClass(IndexPage,[{key:\"getListRoomDetails\",value:function(){var _getListRoomDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(filter){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"getListRoomDetails\");this.setState({isLoadedRooms:false});_context.next=4;return fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=listRoomsDetail\").then(function(res){return res.json();}).then(function(result){var strs=[];var ids=[];var tmp=[];var tmp2={};console.log(result);for(var i=0;i<result.length;i++){tmp=JSON.parse(result[i]);console.log(tmp);strs.push(tmp);tmp2={};tmp2['key']=tmp['roomid'];tmp2['text']=tmp['roomDescription'];tmp2['value']=tmp['roomid'];ids.push(tmp2);}// debugger;\nif(filter){var newstr=strs.filter(function(item){return item[filter.id]==filter.value;});_this2.setState({isLoadedRooms:true,rooms:newstr,roomIds:ids});}else{_this2.setState({isLoadedRooms:true,rooms:strs,roomIds:ids});}},function(error){_this2.setState({isLoadedRooms:false});});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function getListRoomDetails(_x){return _getListRoomDetails.apply(this,arguments);}return getListRoomDetails;}()},{key:\"getListStatus\",value:function getListStatus(){var _this3=this;fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=listStatus\").then(function(res){return res.json();}).then(function(result){var strs=[];var ids=[];var tmp=[];var tmp2={};for(var i=0;i<result.length;i++){tmp=JSON.parse(result[i]);strs.push(tmp);tmp2={};tmp2['key']=tmp['statusId'];tmp2['text']=tmp['description'];tmp2['value']=tmp['statusId'];ids.push(tmp2);}_this3.setState({isLoadedParam:true,status:strs,statusIds:ids});},function(error){_this3.setState({isLoadedParam:false});});}},{key:\"getlistoption\",value:function getlistoption(){var _this4=this;fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=listoption\").then(function(res){return res.json();}).then(function(result){var strs=[];var ids=[];var tmp=[];for(var i=0;i<result.length;i++){tmp=JSON.parse(result[i]);strs.push(tmp);ids.push(tmp['optionId']);}_this4.setState({isLoadedParam:true,listoption:strs,listoptionIds:ids});},function(error){_this4.setState({isLoadedParam:false});});}},{key:\"getroomTypeOther\",value:function getroomTypeOther(){var _this5=this;fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=PricebyOther\").then(function(res){return res.json();}).then(function(result){var strs=[];var ids=[];var tmp=[];var tmp2={};for(var i=0;i<result.length;i++){tmp=JSON.parse(result[i]);strs.push(tmp);tmp2={};tmp2['key']=tmp['roomType'];tmp2['text']=tmp['description'];tmp2['value']=tmp['roomType'];ids.push(tmp2);}_this5.setState({isLoadedParam:true,roomTypeOther:strs,roomTypeOtherIds:ids});},function(error){_this5.setState({isLoadedParam:false});});}},{key:\"UpdateCheckInRoom\",value:function(){var _UpdateCheckInRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,checkinTime,roomClass,options,totalOptionPrice,roomId,noteText){var _this6=this;var formatted_date,current_datetime,encoded;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(noteText);formatted_date='';if(isMobile.iOS()){formatted_date=checkinTime;}else{current_datetime=checkinTime;formatted_date=current_datetime.getFullYear()+\"-\"+(current_datetime.getMonth()+1)+\"-\"+current_datetime.getDate()+\" \"+current_datetime.getHours()+\":\"+current_datetime.getMinutes()+\":\"+current_datetime.getSeconds();}encoded=\"checkinTime=\"+formatted_date+\"&roomClass=\"+roomClass+\"&options=\"+options+\"&noteText=\"+noteText+\"&totalOptionPrice=\"+totalOptionPrice;_context3.next=6;return fetch('https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=checkin&id='+id,{method:'POST',body:encoded,headers:{\"Content-type\":\"application/x-www-form-urlencoded\"}}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var msgerr,isSuccess,stt;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:msgerr='';isSuccess=false;_context2.next=4;return response.json().then(function(data){console.log(data);data['result']=='error'?msgerr=JSON.stringify(data[\"error\"][\"message\"]):isSuccess=true;});case 4:stt=response.status;if(stt==200){if(!msgerr){toast.success(\"Đặt phòng \"+roomId+\" thành công!\",{position:toast.POSITION.TOP_RIGHT});}else{toast.error(\"Error:\"+JSON.stringify(msgerr));}}else{toast.error(\"Something is wrong, please check log for detail!\");}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x9){return _ref.apply(this,arguments);};}()).then(function(){_this6.handleClearSearching();});case 6:case\"end\":return _context3.stop();}}},_callee3);}));function UpdateCheckInRoom(_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _UpdateCheckInRoom.apply(this,arguments);}return UpdateCheckInRoom;}()},{key:\"CheckoutRoom\",value:function(){var _CheckoutRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id,checkinTime,roomClass,options,totalOptionPrice,roomId,action,checkoutTime,totalRoomPrice,totalPrice,noteText){var _this7=this;var formatted_date,formattedcheckout_date,current_datetime,current_Checkoutdatetime,encoded;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log(\"CheckoutRoom index page\");console.log(id);console.log(checkinTime);console.log(roomClass);console.log(options);console.log(totalOptionPrice);console.log(roomId);console.log(action);console.log(checkoutTime);console.log(noteText);formatted_date='';formattedcheckout_date='';if(isMobile.iOS()){formatted_date=checkinTime;formattedcheckout_date=checkoutTime;}else{current_datetime=checkinTime;current_Checkoutdatetime=checkoutTime;formatted_date=current_datetime.getFullYear()+\"-\"+(current_datetime.getMonth()+1)+\"-\"+current_datetime.getDate()+\" \"+current_datetime.getHours()+\":\"+current_datetime.getMinutes()+\":\"+current_datetime.getSeconds();formattedcheckout_date=current_Checkoutdatetime.getFullYear()+\"-\"+(current_Checkoutdatetime.getMonth()+1)+\"-\"+current_Checkoutdatetime.getDate()+\" \"+current_Checkoutdatetime.getHours()+\":\"+current_Checkoutdatetime.getMinutes()+\":\"+current_Checkoutdatetime.getSeconds();}// console.log(formatted_date);\n// console.log(formattedcheckout_date);\nencoded=\"checkinTime=\"+formatted_date+\"&roomClass=\"+roomClass+\"&roomId=\"+roomId+\"&options=\"+options+\"&totalOptionPrice=\"+totalOptionPrice+\"&totalRoomPrice=\"+totalRoomPrice+\"&totalPrice=\"+totalPrice+\"&noteText=\"+noteText+\"&checkoutTime=\"+formattedcheckout_date;if(!(action==\"checkout\")){_context5.next=17;break;}_context5.next=17;return fetch('https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=checkout&id='+id,{method:'POST',body:encoded,headers:{\"Content-type\":\"application/x-www-form-urlencoded\"}}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(response){var msgerr,result,stt;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:msgerr='';result=[];_context4.next=4;return response.json().then(function(data){data['result']=='error'?msgerr=JSON.stringify(data[\"error\"][\"message\"]):result=data['data'];});case 4:stt=response.status;if(stt==200){if(!msgerr){toast.success(\"Thanh toán \"+roomId+\" thành công!\",{position:toast.POSITION.TOP_RIGHT});}else{toast.error(\"Error:\"+JSON.stringify(msgerr));}}else{toast.error(\"Something is wrong, please check log for detail!\");}case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x21){return _ref2.apply(this,arguments);};}()).then(function(){_this7.handleClearSearching();});case 17:case\"end\":return _context5.stop();}}},_callee5);}));function CheckoutRoom(_x10,_x11,_x12,_x13,_x14,_x15,_x16,_x17,_x18,_x19,_x20){return _CheckoutRoom.apply(this,arguments);}return CheckoutRoom;}()},{key:\"handleClearSearching\",value:function handleClearSearching(){this.setState({roomidselected:'',statusSelected:''});this.getListRoomDetails();}},{key:\"handleChangeRoomIDSelect\",value:function handleChangeRoomIDSelect(event){var _this8=this;var val=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(val==null)return;this.setState({roomidselected:val['value'],statusSelected:''},function(){var filter={'id':'roomid','value':val['value']};_this8.getListRoomDetails(filter);});}},{key:\"handleChangeStatusIDSelect\",value:function handleChangeStatusIDSelect(event){var _this9=this;var val=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(val==null)return;this.setState({statusSelected:val['value'],roomidselected:''},function(){var filter={'id':'status','value':val['value']};_this9.getListRoomDetails(filter);});}},{key:\"renderSearchForm\",value:function renderSearchForm(){if(this.state.isLoadedParam==false){return React.createElement(Segment,null,React.createElement(Dimmer,{active:true,inverted:true},React.createElement(Loader,{size:\"large\"},\"Loading\")),React.createElement(Image,{src:\"images/loader.png\"}));}var listRoomIds=this.state.roomIds;var listStatusIds=this.state.statusIds;var styleDisable={'pointerEvents':''};// debugger;\nif(!this.state.isLoadedRooms||!this.state.isLoadedParam){styleDisable={'pointerEvents':'none'};}var newlistRoomIds='';if(listRoomIds.length>0){listRoomIds.map(function(item){var tmp={title:item.key,description:item.text};item['title']=item.key;item['description']=item.text;});}return React.createElement(Segment,{padded:true,style:styleDisable},React.createElement(Label,{attached:\"top left\",onClick:this.handleClearSearching},\"Refresh\"),React.createElement(\"br\",null),React.createElement(Form.Group,{widths:\"equal\"},React.createElement(Form.Select,{fluid:true,icon:\"\",label:\"L\\u1ECDc theo Ph\\xF2ng\",value:this.state.roomidselected,onChange:this.handleChangeRoomIDSelect,options:listRoomIds,placeholder:\"RoomIDs\"}),React.createElement(Form.Select,{fluid:true,icon:\"\",label:\"L\\u1ECDc theo tr\\u1EA1ng th\\xE1i\",value:this.state.statusSelected,options:listStatusIds,onChange:this.handleChangeStatusIDSelect,placeholder:\"Status\"})));}},{key:\"renderListRooms\",value:function renderListRooms(){var _this$state=_objectSpread({},this.state),rooms=_this$state.rooms,statusIds=_this$state.statusIds,roomTypeOtherIds=_this$state.roomTypeOtherIds,listoptionIds=_this$state.listoptionIds,listoption=_this$state.listoption;if(this.state.isLoadedRooms==false){return React.createElement(Segment,null,React.createElement(Dimmer,{active:true,inverted:true},React.createElement(Loader,{size:\"large\"},\"Loading\")),React.createElement(Image,{src:\"images/loader.png\"}));}return React.createElement(Segment,{padded:true},React.createElement(Label,{attached:\"top\"},\"Room List\"),React.createElement(ListRoomRows,{roomsInfo:rooms,statusList:statusIds,roomTypeOther:roomTypeOtherIds,listoptionIds:listoptionIds,listoption:listoption,UpdateCheckInRoom:this.UpdateCheckInRoom,CheckoutRoom:this.CheckoutRoom}));}},{key:\"sha256\",value:function(){var _sha=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(message){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(encrypt(\"bangth\"));case 1:case\"end\":return _context6.stop();}}},_callee6);}));function sha256(_x22){return _sha.apply(this,arguments);}return sha256;}()},{key:\"getIPAddress\",value:function getIPAddress(){var _this10=this;// var https = require('https');\n// var callback = function(err, ip){\n//     if(err){\n//         return console.log(err);\n//     }\n//     console.log('Our public IP is', ip);\n//     // do something here with the IP address\n// };\n// https.get({\n//     host: 'api.ipify.org',\n// }, function(response) {\n//     var ip = '';\n//     response.on('data', function(d) {\n//         ip += d;\n//     });\n//     response.on('end', function() {\n//         if(ip){\n//             callback(null, ip);\n//         } else {\n//             callback('could not get public ip address :(');\n//         }\n//     });\n// });\n// sessionStorage.setItem('key', 'value');\nfetch(\"https://api.ipify.org/?format=json\",{method:\"GET\",// body: JSON.stringify(data),\nheaders:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(result){console.log(result);_this10.setState({ipadd:result[\"ip\"]});},function(error){console.log(error);});}},{key:\"componentDidMount\",value:function componentDidMount(){console.log(this.props.userInfo);this.getIPAddress();this.getListRoomDetails();this.getListStatus();this.getroomTypeOther();this.getlistoption();}},{key:\"render\",value:function render(){// console.log(this.state.statusIds);\n// console.log(this.state.statusSelected);\nreturn React.createElement(\"div\",null,React.createElement(Form,null,this.renderSearchForm(),this.renderListRooms()),React.createElement(\"br\",null),React.createElement(\"br\",null));}}]);return IndexPage;}(React.Component);","map":{"version":3,"sources":["/Users/bangth/Desktop/TBHotel/src/containers/IndexPage.js"],"names":["React","ReactDOM","Form","Input","Image","Loader","Segment","Dimmer","Label","ListRoomRows","toast","encrypt","isMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","IndexPage","props","state","isLoadedRooms","isLoadedParam","roomDetailOpen","rooms","roomIds","status","statusIds","roomTypeOther","roomTypeOtherIds","listoption","listoptionIds","roomidselected","statusSelected","forEach","method","bind","filter","console","log","setState","fetch","then","res","json","result","strs","ids","tmp","tmp2","i","length","JSON","parse","push","newstr","item","id","value","error","checkinTime","roomClass","options","totalOptionPrice","roomId","noteText","formatted_date","current_datetime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","encoded","body","headers","response","msgerr","isSuccess","data","stringify","stt","success","position","POSITION","TOP_RIGHT","handleClearSearching","action","checkoutTime","totalRoomPrice","totalPrice","formattedcheckout_date","current_Checkoutdatetime","getListRoomDetails","event","val","listRoomIds","listStatusIds","styleDisable","newlistRoomIds","map","title","key","description","text","handleChangeRoomIDSelect","handleChangeStatusIDSelect","UpdateCheckInRoom","CheckoutRoom","message","ipadd","userInfo","getIPAddress","getListStatus","getroomTypeOther","getlistoption","renderSearchForm","renderListRooms","Component"],"mappings":"6lEAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CAEA,OAAQC,IAAR,CAAcC,KAAd,CAAqBC,KAArB,CAA4BC,MAA5B,CAAoCC,OAApC,CAA6CC,MAA7C,CAAqDC,KAArD,KAAiE,mBAAjE,CACA,OAAQC,YAAR,KAA2B,4BAA3B,CACA;AACA,MAAO,kCAAP,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,MAAO,uCAAP,CACA,MAAO,YAAP,CACA,OAAQC,OAAR,KAAsB,sBAAtB,CAGA,GAAMC,CAAAA,QAAQ,CAAG,CACbC,OAAO,CAAE,kBAAY,CACjB,MAAOC,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,UAA1B,CAAP,CACH,CAHY,CAIbC,UAAU,CAAE,qBAAY,CACpB,MAAOH,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAP,CACH,CANY,CAObE,GAAG,CAAE,cAAY,CACb,MAAOJ,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,mBAA1B,CAAP,CACH,CATY,CAUbG,KAAK,CAAE,gBAAY,CACf,MAAOL,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAP,CACH,CAZY,CAabI,OAAO,CAAE,kBAAY,CACjB,MAAON,CAAAA,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,WAA1B,CAAP,CACH,CAfY,CAgBbK,GAAG,CAAE,cAAY,CACb,MAAQT,CAAAA,QAAQ,CAACC,OAAT,IAAsBD,QAAQ,CAACK,UAAT,EAAtB,EAA+CL,QAAQ,CAACM,GAAT,EAA/C,EAAiEN,QAAQ,CAACO,KAAT,EAAjE,EAAqFP,QAAQ,CAACQ,OAAT,EAA7F,CACH,CAlBY,CAAjB,CAqBA,UAAaE,CAAAA,SAAb,+EACI,mBAAYC,KAAZ,CAAmB,2CACf,2EAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,aAAa,CAAE,KADN,CAETC,aAAa,CAAE,KAFN,CAGTC,cAAc,CAAE,KAHP,CAITC,KAAK,CAAE,EAJE,CAKTC,OAAO,CAAE,EALA,CAMTC,MAAM,CAAE,EANC,CAOTC,SAAS,CAAE,EAPF,CAQTC,aAAa,CAAE,EARN,CASTC,gBAAgB,CAAE,EATT,CAUTC,UAAU,CAAE,EAVH,CAWTC,aAAa,CAAE,EAXN,CAYTC,cAAc,CAAE,EAZP,CAaTC,cAAc,CAAE,EAbP,CAAb,CAgBA,CACI,oBADJ,CAEI,mBAFJ,CAGI,0BAHJ,CAII,4BAJJ,CAKI,eALJ,CAMI,kBANJ,CAOI,iBAPJ,CAQI,kBARJ,CASI,eATJ,CAUI,sBAVJ,CAWI,cAXJ,CAYI,cAZJ,CAaI,QAbJ,EAcEC,OAdF,CAcU,SAACC,MAAD,QAAY,OAAKA,MAAL,EAAe,MAAKA,MAAL,EAAaC,IAAb,+BAA3B,EAdV,EAlBe,aAiClB,CAlCL,oKAoC6BC,MApC7B,kIAqCQC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACA,KAAKC,QAAL,CAAc,CACVnB,aAAa,CAAE,KADL,CAAd,EAtCR,sBAyCcoB,CAAAA,KAAK,CAAC,uHAAD,CAAL,CACDC,IADC,CACI,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADP,EAEDF,IAFC,CAGE,SAACG,MAAD,CAAY,CACR,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACAX,OAAO,CAACC,GAAR,CAAYM,MAAZ,EACA,IAAK,GAAIK,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,MAAM,CAACM,MAA3B,CAAmCD,CAAC,EAApC,CAAwC,CACpCF,GAAG,CAAGI,IAAI,CAACC,KAAL,CAAWR,MAAM,CAACK,CAAD,CAAjB,CAAN,CACAZ,OAAO,CAACC,GAAR,CAAYS,GAAZ,EACAF,IAAI,CAACQ,IAAL,CAAUN,GAAV,EACAC,IAAI,CAAG,EAAP,CACAA,IAAI,CAAC,KAAD,CAAJ,CAAcD,GAAG,CAAC,QAAD,CAAjB,CACAC,IAAI,CAAC,MAAD,CAAJ,CAAeD,GAAG,CAAC,iBAAD,CAAlB,CACAC,IAAI,CAAC,OAAD,CAAJ,CAAgBD,GAAG,CAAC,QAAD,CAAnB,CACAD,GAAG,CAACO,IAAJ,CAASL,IAAT,EACH,CACD;AACA,GAAIZ,MAAJ,CAAY,CACR,GAAIkB,CAAAA,MAAM,CAAGT,IAAI,CAACT,MAAL,CAAY,SAAUmB,IAAV,CAAgB,CACrC,MAAOA,CAAAA,IAAI,CAACnB,MAAM,CAACoB,EAAR,CAAJ,EAAmBpB,MAAM,CAACqB,KAAjC,CACH,CAFY,CAAb,CAGA,MAAI,CAAClB,QAAL,CAAc,CACVnB,aAAa,CAAE,IADL,CAEVG,KAAK,CAAE+B,MAFG,CAGV9B,OAAO,CAAEsB,GAHC,CAAd,EAKH,CATD,IASO,CACH,MAAI,CAACP,QAAL,CAAc,CACVnB,aAAa,CAAE,IADL,CAEVG,KAAK,CAAEsB,IAFG,CAGVrB,OAAO,CAAEsB,GAHC,CAAd,EAKH,CACJ,CApCH,CAoCK,SAACY,KAAD,CAAW,CACV,MAAI,CAACnB,QAAL,CAAc,CACVnB,aAAa,CAAE,KADL,CAAd,EAGH,CAxCH,CAzCd,mOAqFoB,iBACZoB,KAAK,CAAC,kHAAD,CAAL,CACKC,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAGQ,SAACG,MAAD,CAAY,CACR,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,MAAM,CAACM,MAA3B,CAAmCD,CAAC,EAApC,CAAwC,CACpCF,GAAG,CAAGI,IAAI,CAACC,KAAL,CAAWR,MAAM,CAACK,CAAD,CAAjB,CAAN,CACAJ,IAAI,CAACQ,IAAL,CAAUN,GAAV,EACAC,IAAI,CAAG,EAAP,CACAA,IAAI,CAAC,KAAD,CAAJ,CAAcD,GAAG,CAAC,UAAD,CAAjB,CACAC,IAAI,CAAC,MAAD,CAAJ,CAAeD,GAAG,CAAC,aAAD,CAAlB,CACAC,IAAI,CAAC,OAAD,CAAJ,CAAgBD,GAAG,CAAC,UAAD,CAAnB,CACAD,GAAG,CAACO,IAAJ,CAASL,IAAT,EACH,CACD,MAAI,CAACT,QAAL,CAAc,CACVlB,aAAa,CAAE,IADL,CAEVI,MAAM,CAAEoB,IAFE,CAGVnB,SAAS,CAAEoB,GAHD,CAAd,EAKH,CAtBT,CAsBW,SAACY,KAAD,CAAW,CACV,MAAI,CAACnB,QAAL,CAAc,CACVlB,aAAa,CAAE,KADL,CAAd,EAGH,CA1BT,EA4BH,CAlHL,qDAoHoB,iBACZmB,KAAK,CAAC,kHAAD,CAAL,CACKC,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAGQ,SAACG,MAAD,CAAY,CACR,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,IAAK,GAAIE,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,MAAM,CAACM,MAA3B,CAAmCD,CAAC,EAApC,CAAwC,CACpCF,GAAG,CAAGI,IAAI,CAACC,KAAL,CAAWR,MAAM,CAACK,CAAD,CAAjB,CAAN,CACAJ,IAAI,CAACQ,IAAL,CAAUN,GAAV,EACAD,GAAG,CAACO,IAAJ,CAASN,GAAG,CAAC,UAAD,CAAZ,EACH,CACD,MAAI,CAACR,QAAL,CAAc,CACVlB,aAAa,CAAE,IADL,CAEVQ,UAAU,CAAEgB,IAFF,CAGVf,aAAa,CAAEgB,GAHL,CAAd,EAKH,CAjBT,CAiBW,SAACY,KAAD,CAAW,CACV,MAAI,CAACnB,QAAL,CAAc,CACVlB,aAAa,CAAE,KADL,CAAd,EAGH,CArBT,EAuBH,CA5IL,2DA8IuB,iBACfmB,KAAK,CAAC,oHAAD,CAAL,CACKC,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAGQ,SAACG,MAAD,CAAY,CACR,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,MAAM,CAACM,MAA3B,CAAmCD,CAAC,EAApC,CAAwC,CACpCF,GAAG,CAAGI,IAAI,CAACC,KAAL,CAAWR,MAAM,CAACK,CAAD,CAAjB,CAAN,CACAJ,IAAI,CAACQ,IAAL,CAAUN,GAAV,EACAC,IAAI,CAAG,EAAP,CACAA,IAAI,CAAC,KAAD,CAAJ,CAAcD,GAAG,CAAC,UAAD,CAAjB,CACAC,IAAI,CAAC,MAAD,CAAJ,CAAeD,GAAG,CAAC,aAAD,CAAlB,CACAC,IAAI,CAAC,OAAD,CAAJ,CAAgBD,GAAG,CAAC,UAAD,CAAnB,CACAD,GAAG,CAACO,IAAJ,CAASL,IAAT,EACH,CACD,MAAI,CAACT,QAAL,CAAc,CACVlB,aAAa,CAAE,IADL,CAEVM,aAAa,CAAEkB,IAFL,CAGVjB,gBAAgB,CAAEkB,GAHR,CAAd,EAKH,CAtBT,CAsBW,SAACY,KAAD,CAAW,CACV,MAAI,CAACnB,QAAL,CAAc,CACVlB,aAAa,CAAE,KADL,CAAd,EAGH,CA1BT,EA4BH,CA3KL,6IA6K4BmC,EA7K5B,CA6KgCG,WA7KhC,CA6K6CC,SA7K7C,CA6KwDC,OA7KxD,CA6KiEC,gBA7KjE,CA6KmFC,MA7KnF,CA6K2FC,QA7K3F,kLA8KQ3B,OAAO,CAACC,GAAR,CAAY0B,QAAZ,EACIC,cA/KZ,CA+K6B,EA/K7B,CAgLQ,GAAI1D,QAAQ,CAACM,GAAT,EAAJ,CAAoB,CAChBoD,cAAc,CAAGN,WAAjB,CACH,CAFD,IAEO,CACCO,gBADD,CACoBP,WADpB,CAEHM,cAAc,CAAGC,gBAAgB,CAACC,WAAjB,GAAiC,GAAjC,EAAwCD,gBAAgB,CAACE,QAAjB,GAA8B,CAAtE,EAA2E,GAA3E,CAAiFF,gBAAgB,CAACG,OAAjB,EAAjF,CAA8G,GAA9G,CAAoHH,gBAAgB,CAACI,QAAjB,EAApH,CAAkJ,GAAlJ,CAAwJJ,gBAAgB,CAACK,UAAjB,EAAxJ,CAAwL,GAAxL,CAA8LL,gBAAgB,CAACM,UAAjB,EAA/M,CACH,CAEGC,OAvLZ,CAuLsB,eAAiBR,cAAjB,CACV,aADU,CACML,SADN,CAEV,WAFU,CAEIC,OAFJ,CAGV,YAHU,CAGKG,QAHL,CAIV,oBAJU,CAIaF,gBA3LnC,wBA6LctB,CAAAA,KAAK,CAAC,oHAAsHgB,EAAvH,CAA2H,CAClItB,MAAM,CAAE,MAD0H,CAElIwC,IAAI,CAAED,OAF4H,CAGlIE,OAAO,CAAE,CACL,eAAgB,mCADX,CAHyH,CAA3H,CAAL,CAMHlC,IANG,0FAME,kBAAgBmC,QAAhB,+IACAC,MADA,CACS,EADT,CAEAC,SAFA,CAEY,KAFZ,wBAGEF,CAAAA,QAAQ,CAACjC,IAAT,GAAgBF,IAAhB,CAAqB,SAAUsC,IAAV,CAAgB,CACvC1C,OAAO,CAACC,GAAR,CAAYyC,IAAZ,EACAA,IAAI,CAAC,QAAD,CAAJ,EAAkB,OAAlB,CAA4BF,MAAM,CAAG1B,IAAI,CAAC6B,SAAL,CAAeD,IAAI,CAAC,OAAD,CAAJ,CAAc,SAAd,CAAf,CAArC,CAAgFD,SAAS,CAAG,IAA5F,CACH,CAHK,CAHF,QAQAG,GARA,CAQML,QAAQ,CAACnD,MARf,CASJ,GAAIwD,GAAG,EAAI,GAAX,CAAgB,CACZ,GAAI,CAACJ,MAAL,CAAa,CACTxE,KAAK,CAAC6E,OAAN,CAAc,aAAenB,MAAf,CAAwB,cAAtC,CAAsD,CAACoB,QAAQ,CAAE9E,KAAK,CAAC+E,QAAN,CAAeC,SAA1B,CAAtD,EACH,CAFD,IAEO,CACHhF,KAAK,CAACqD,KAAN,CAAY,SAAWP,IAAI,CAAC6B,SAAL,CAAeH,MAAf,CAAvB,EACH,CACJ,CAND,IAMO,CACHxE,KAAK,CAACqD,KAAN,CAAY,kDAAZ,EACH,CAjBG,wDANF,iEAyBHjB,IAzBG,CAyBE,UAAM,CACV,MAAI,CAAC6C,oBAAL,GACH,CA3BK,CA7Ld,oUA2NuB9B,EA3NvB,CA2N2BG,WA3N3B,CA2NwCC,SA3NxC,CA2NmDC,OA3NnD,CA2N4DC,gBA3N5D,CA2N8EC,MA3N9E,CA2NsFwB,MA3NtF,CA2N8FC,YA3N9F,CA2N4GC,cA3N5G,CA2N4HC,UA3N5H,CA2NwI1B,QA3NxI,kOA4NQ3B,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACAD,OAAO,CAACC,GAAR,CAAYkB,EAAZ,EACAnB,OAAO,CAACC,GAAR,CAAYqB,WAAZ,EACAtB,OAAO,CAACC,GAAR,CAAYsB,SAAZ,EACAvB,OAAO,CAACC,GAAR,CAAYuB,OAAZ,EACAxB,OAAO,CAACC,GAAR,CAAYwB,gBAAZ,EACAzB,OAAO,CAACC,GAAR,CAAYyB,MAAZ,EACA1B,OAAO,CAACC,GAAR,CAAYiD,MAAZ,EACAlD,OAAO,CAACC,GAAR,CAAYkD,YAAZ,EACAnD,OAAO,CAACC,GAAR,CAAY0B,QAAZ,EAEIC,cAvOZ,CAuO6B,EAvO7B,CAwOY0B,sBAxOZ,CAwOqC,EAxOrC,CAyOQ,GAAIpF,QAAQ,CAACM,GAAT,EAAJ,CAAoB,CAChBoD,cAAc,CAAGN,WAAjB,CACAgC,sBAAsB,CAAGH,YAAzB,CACH,CAHD,IAGO,CACCtB,gBADD,CACoBP,WADpB,CAECiC,wBAFD,CAE4BJ,YAF5B,CAGHvB,cAAc,CAAGC,gBAAgB,CAACC,WAAjB,GAAiC,GAAjC,EAAwCD,gBAAgB,CAACE,QAAjB,GAA8B,CAAtE,EAA2E,GAA3E,CAAiFF,gBAAgB,CAACG,OAAjB,EAAjF,CAA8G,GAA9G,CAAoHH,gBAAgB,CAACI,QAAjB,EAApH,CAAkJ,GAAlJ,CAAwJJ,gBAAgB,CAACK,UAAjB,EAAxJ,CAAwL,GAAxL,CAA8LL,gBAAgB,CAACM,UAAjB,EAA/M,CACAmB,sBAAsB,CAAGC,wBAAwB,CAACzB,WAAzB,GAAyC,GAAzC,EAAgDyB,wBAAwB,CAACxB,QAAzB,GAAsC,CAAtF,EAA2F,GAA3F,CAAiGwB,wBAAwB,CAACvB,OAAzB,EAAjG,CAAsI,GAAtI,CAA4IuB,wBAAwB,CAACtB,QAAzB,EAA5I,CAAkL,GAAlL,CAAwLsB,wBAAwB,CAACrB,UAAzB,EAAxL,CAAgO,GAAhO,CAAsOqB,wBAAwB,CAACpB,UAAzB,EAA/P,CACH,CAED;AACA;AAEIC,OAtPZ,CAsPsB,eAAiBR,cAAjB,CACV,aADU,CACML,SADN,CAEV,UAFU,CAEGG,MAFH,CAGV,WAHU,CAGIF,OAHJ,CAIV,oBAJU,CAIaC,gBAJb,CAKV,kBALU,CAKW2B,cALX,CAMV,cANU,CAMOC,UANP,CAOV,YAPU,CAOK1B,QAPL,CAQV,gBARU,CAQS2B,sBA9P/B,MAgQYJ,MAAM,EAAI,UAhQtB,oDAiQkB/C,CAAAA,KAAK,CAAC,qHAAuHgB,EAAxH,CAA4H,CACnItB,MAAM,CAAE,MAD2H,CAEnIwC,IAAI,CAAED,OAF6H,CAGnIE,OAAO,CAAE,CACL,eAAgB,mCADX,CAH0H,CAA5H,CAAL,CAMHlC,IANG,2FAME,kBAAgBmC,QAAhB,4IACAC,MADA,CACS,EADT,CAEAjC,MAFA,CAES,EAFT,wBAGEgC,CAAAA,QAAQ,CAACjC,IAAT,GAAgBF,IAAhB,CAAqB,SAAUsC,IAAV,CAAgB,CACvCA,IAAI,CAAC,QAAD,CAAJ,EAAkB,OAAlB,CAA4BF,MAAM,CAAG1B,IAAI,CAAC6B,SAAL,CAAeD,IAAI,CAAC,OAAD,CAAJ,CAAc,SAAd,CAAf,CAArC,CAAgFnC,MAAM,CAAGmC,IAAI,CAAC,MAAD,CAA7F,CACH,CAFK,CAHF,QAOAE,GAPA,CAOML,QAAQ,CAACnD,MAPf,CAQJ,GAAIwD,GAAG,EAAI,GAAX,CAAgB,CACZ,GAAI,CAACJ,MAAL,CAAa,CACTxE,KAAK,CAAC6E,OAAN,CAAc,cAAgBnB,MAAhB,CAAyB,cAAvC,CAAuD,CAACoB,QAAQ,CAAE9E,KAAK,CAAC+E,QAAN,CAAeC,SAA1B,CAAvD,EACH,CAFD,IAEO,CACHhF,KAAK,CAACqD,KAAN,CAAY,SAAWP,IAAI,CAAC6B,SAAL,CAAeH,MAAf,CAAvB,EACH,CACJ,CAND,IAMO,CACHxE,KAAK,CAACqD,KAAN,CAAY,kDAAZ,EACH,CAhBG,wDANF,mEAwBHjB,IAxBG,CAwBE,UAAM,CACV,MAAI,CAAC6C,oBAAL,GACH,CA1BK,CAjQlB,iRA+R2B,CACnB,KAAK/C,QAAL,CAAc,CACVR,cAAc,CAAE,EADN,CAEVC,cAAc,CAAE,EAFN,CAAd,EAIA,KAAK6D,kBAAL,GACH,CArSL,0EAuS6BC,KAvS7B,CAuSgD,oBAAZC,CAAAA,GAAY,2DAAN,IAAM,CACxC,GAAIA,GAAG,EAAI,IAAX,CACI,OACJ,KAAKxD,QAAL,CAAc,CACVR,cAAc,CAAEgE,GAAG,CAAC,OAAD,CADT,CAEV/D,cAAc,CAAE,EAFN,CAAd,CAGG,UAAM,CACL,GAAII,CAAAA,MAAM,CAAG,CAAC,KAAM,QAAP,CAAiB,QAAS2D,GAAG,CAAC,OAAD,CAA7B,CAAb,CACA,MAAI,CAACF,kBAAL,CAAwBzD,MAAxB,EACH,CAND,EAOH,CAjTL,8EAmT+B0D,KAnT/B,CAmTkD,oBAAZC,CAAAA,GAAY,2DAAN,IAAM,CAC1C,GAAIA,GAAG,EAAI,IAAX,CACI,OACJ,KAAKxD,QAAL,CAAc,CACVP,cAAc,CAAE+D,GAAG,CAAC,OAAD,CADT,CAEVhE,cAAc,CAAE,EAFN,CAAd,CAGG,UAAM,CACL,GAAIK,CAAAA,MAAM,CAAG,CAAC,KAAM,QAAP,CAAiB,QAAS2D,GAAG,CAAC,OAAD,CAA7B,CAAb,CACA,MAAI,CAACF,kBAAL,CAAwBzD,MAAxB,EACH,CAND,EAOH,CA7TL,2DA+TuB,CACf,GAAI,KAAKjB,KAAL,CAAWE,aAAX,EAA4B,KAAhC,CAAuC,CACnC,MAAQ,qBAAC,OAAD,MACJ,oBAAC,MAAD,EAAQ,MAAM,KAAd,CAAe,QAAQ,KAAvB,EACI,oBAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,YADJ,CADI,CAIJ,oBAAC,KAAD,EAAO,GAAG,CAAC,mBAAX,EAJI,CAAR,CAMH,CAED,GAAI2E,CAAAA,WAAW,CAAG,KAAK7E,KAAL,CAAWK,OAA7B,CACA,GAAIyE,CAAAA,aAAa,CAAG,KAAK9E,KAAL,CAAWO,SAA/B,CACA,GAAIwE,CAAAA,YAAY,CAAG,CAAC,gBAAiB,EAAlB,CAAnB,CACA;AACA,GAAI,CAAC,KAAK/E,KAAL,CAAWC,aAAZ,EAA6B,CAAC,KAAKD,KAAL,CAAWE,aAA7C,CAA4D,CACxD6E,YAAY,CAAG,CAAC,gBAAiB,MAAlB,CAAf,CACH,CACD,GAAIC,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIH,WAAW,CAAC9C,MAAZ,CAAqB,CAAzB,CAA4B,CACxB8C,WAAW,CAACI,GAAZ,CAAgB,SAAC7C,IAAD,CAAU,CACtB,GAAIR,CAAAA,GAAG,CAAG,CACNsD,KAAK,CAAE9C,IAAI,CAAC+C,GADN,CAENC,WAAW,CAAEhD,IAAI,CAACiD,IAFZ,CAAV,CAIAjD,IAAI,CAAC,OAAD,CAAJ,CAAgBA,IAAI,CAAC+C,GAArB,CACA/C,IAAI,CAAC,aAAD,CAAJ,CAAsBA,IAAI,CAACiD,IAA3B,CACH,CAPD,EAQH,CACD,MACI,qBAAC,OAAD,EAAS,MAAM,KAAf,CAAgB,KAAK,CAAEN,YAAvB,EAGI,oBAAC,KAAD,EAAO,QAAQ,CAAC,UAAhB,CAA2B,OAAO,CAAE,KAAKZ,oBAAzC,YAHJ,CAII,8BAJJ,CAKI,oBAAC,IAAD,CAAM,KAAN,EAAY,MAAM,CAAC,OAAnB,EACI,oBAAC,IAAD,CAAM,MAAN,EACI,KAAK,KADT,CAEI,IAAI,CAAC,EAFT,CAGI,KAAK,CAAC,wBAHV,CAII,KAAK,CAAE,KAAKnE,KAAL,CAAWY,cAJtB,CAKI,QAAQ,CAAE,KAAK0E,wBALnB,CAMI,OAAO,CAAET,WANb,CAOI,WAAW,CAAC,SAPhB,EADJ,CAUI,oBAAC,IAAD,CAAM,MAAN,EACI,KAAK,KADT,CAEI,IAAI,CAAC,EAFT,CAGI,KAAK,CAAC,kCAHV,CAII,KAAK,CAAE,KAAK7E,KAAL,CAAWa,cAJtB,CAKI,OAAO,CAAEiE,aALb,CAMI,QAAQ,CAAE,KAAKS,0BANnB,CAOI,WAAW,CAAC,QAPhB,EAVJ,CALJ,CADJ,CA4BH,CAvXL,yDAyXsB,kCAC8D,KAAKvF,KADnE,EACPI,KADO,aACPA,KADO,CACAG,SADA,aACAA,SADA,CACWE,gBADX,aACWA,gBADX,CAC6BE,aAD7B,aAC6BA,aAD7B,CAC4CD,UAD5C,aAC4CA,UAD5C,CAGd,GAAI,KAAKV,KAAL,CAAWC,aAAX,EAA4B,KAAhC,CAAuC,CACnC,MAAQ,qBAAC,OAAD,MACJ,oBAAC,MAAD,EAAQ,MAAM,KAAd,CAAe,QAAQ,KAAvB,EACI,oBAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,YADJ,CADI,CAIJ,oBAAC,KAAD,EAAO,GAAG,CAAC,mBAAX,EAJI,CAAR,CAMH,CAED,MACI,qBAAC,OAAD,EAAS,MAAM,KAAf,EACI,oBAAC,KAAD,EAAO,QAAQ,CAAC,KAAhB,cADJ,CAEI,oBAAC,YAAD,EAAc,SAAS,CAAEG,KAAzB,CACc,UAAU,CAAEG,SAD1B,CAEc,aAAa,CAAEE,gBAF7B,CAGc,aAAa,CAAEE,aAH7B,CAIc,UAAU,CAAED,UAJ1B,CAKc,iBAAiB,CAAE,KAAK8E,iBALtC,CAMc,YAAY,CAAE,KAAKC,YANjC,EAFJ,CADJ,CAaH,CAlZL,oHAoZiBC,OApZjB,sHAqZQxE,OAAO,CAACC,GAAR,CAAYhC,OAAO,CAAC,QAAD,CAAnB,EArZR,wLAyZmB,kBACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAkC,KAAK,CAAC,oCAAD,CAAuC,CACxCN,MAAM,CAAE,KADgC,CAExC;AACAyC,OAAO,CAAE,CACL,eAAgB,kBADX,CAH+B,CAAvC,CAAL,CAMGlC,IANH,CAMQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EANX,EAOKF,IAPL,CAQQ,SAACG,MAAD,CAAY,CACRP,OAAO,CAACC,GAAR,CAAYM,MAAZ,EACA,OAAI,CAACL,QAAL,CAAc,CACVuE,KAAK,CAAElE,MAAM,CAAC,IAAD,CADH,CAAd,EAGH,CAbT,CAaW,SAACc,KAAD,CAAW,CACVrB,OAAO,CAACC,GAAR,CAAYoB,KAAZ,EACH,CAfT,EAiBH,CApcL,6DAscwB,CAChBrB,OAAO,CAACC,GAAR,CAAY,KAAKpB,KAAL,CAAW6F,QAAvB,EACA,KAAKC,YAAL,GACA,KAAKnB,kBAAL,GACA,KAAKoB,aAAL,GACA,KAAKC,gBAAL,GACA,KAAKC,aAAL,GACH,CA7cL,uCA+ca,CACL;AACA;AACA,MACI,gCAEI,oBAAC,IAAD,MACK,KAAKC,gBAAL,EADL,CAEK,KAAKC,eAAL,EAFL,CAFJ,CAMI,8BANJ,CAMS,8BANT,CADJ,CAUH,CA5dL,uBAA+B1H,KAAK,CAAC2H,SAArC","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport {Form, Input, Image, Loader, Segment, Dimmer, Label} from 'semantic-ui-react';\nimport {ListRoomRows} from '../components/ListRoomRows';\n// import {SearchingTab} from '../components/SearchingTab';\nimport 'semantic-ui-css/semantic.min.css';\nimport {toast} from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../App.css';\nimport {encrypt} from '../components/sha256';\n\n\nconst isMobile = {\n    Android: function () {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function () {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function () {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function () {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function () {\n        return navigator.userAgent.match(/IEMobile/i);\n    },\n    any: function () {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n};\n\nexport class IndexPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isLoadedRooms: false,\n            isLoadedParam: false,\n            roomDetailOpen: false,\n            rooms: [],\n            roomIds: [],\n            status: [],\n            statusIds: [],\n            roomTypeOther: [],\n            roomTypeOtherIds: [],\n            listoption: [],\n            listoptionIds: [],\n            roomidselected: '',\n            statusSelected: ''\n        };\n\n        [\n            'getListRoomDetails',\n            'UpdateCheckInRoom',\n            'handleChangeRoomIDSelect',\n            'handleChangeStatusIDSelect',\n            'getListStatus',\n            'renderSearchForm',\n            'renderListRooms',\n            'getroomTypeOther',\n            'getlistoption',\n            'handleClearSearching',\n            'CheckoutRoom',\n            'getIPAddress',\n            'sha256'\n        ].forEach((method) => this[method] = this[method].bind(this));\n    }\n\n    async getListRoomDetails(filter) {\n        console.log(\"getListRoomDetails\");\n        this.setState({\n            isLoadedRooms: false,\n        });\n        await fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=listRoomsDetail\")\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    let strs = [];\n                    let ids = [];\n                    let tmp = [];\n                    let tmp2 = {};\n                    console.log(result);\n                    for (let i = 0; i < result.length; i++) {\n                        tmp = JSON.parse(result[i])\n                        console.log(tmp)\n                        strs.push(tmp);\n                        tmp2 = {};\n                        tmp2['key'] = tmp['roomid'];\n                        tmp2['text'] = tmp['roomDescription'];\n                        tmp2['value'] = tmp['roomid'];\n                        ids.push(tmp2);\n                    }\n                    // debugger;\n                    if (filter) {\n                        let newstr = strs.filter(function (item) {\n                            return item[filter.id] == filter.value;\n                        });\n                        this.setState({\n                            isLoadedRooms: true,\n                            rooms: newstr,\n                            roomIds: ids\n                        });\n                    } else {\n                        this.setState({\n                            isLoadedRooms: true,\n                            rooms: strs,\n                            roomIds: ids\n                        });\n                    }\n                }, (error) => {\n                    this.setState({\n                        isLoadedRooms: false,\n                    });\n                }\n            )\n    }\n\n    getListStatus() {\n        fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=listStatus\")\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    let strs = [];\n                    let ids = [];\n                    let tmp = [];\n                    let tmp2 = {};\n                    for (let i = 0; i < result.length; i++) {\n                        tmp = JSON.parse(result[i])\n                        strs.push(tmp);\n                        tmp2 = {};\n                        tmp2['key'] = tmp['statusId'];\n                        tmp2['text'] = tmp['description'];\n                        tmp2['value'] = tmp['statusId'];\n                        ids.push(tmp2);\n                    }\n                    this.setState({\n                        isLoadedParam: true,\n                        status: strs,\n                        statusIds: ids\n                    });\n                }, (error) => {\n                    this.setState({\n                        isLoadedParam: false,\n                    });\n                }\n            )\n    }\n\n    getlistoption() {\n        fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=listoption\")\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    let strs = [];\n                    let ids = [];\n                    let tmp = [];\n                    for (let i = 0; i < result.length; i++) {\n                        tmp = JSON.parse(result[i])\n                        strs.push(tmp);\n                        ids.push(tmp['optionId']);\n                    }\n                    this.setState({\n                        isLoadedParam: true,\n                        listoption: strs,\n                        listoptionIds: ids\n                    });\n                }, (error) => {\n                    this.setState({\n                        isLoadedParam: false,\n                    });\n                }\n            )\n    }\n\n    getroomTypeOther() {\n        fetch(\"https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=PricebyOther\")\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    let strs = [];\n                    let ids = [];\n                    let tmp = [];\n                    let tmp2 = {};\n                    for (let i = 0; i < result.length; i++) {\n                        tmp = JSON.parse(result[i])\n                        strs.push(tmp);\n                        tmp2 = {};\n                        tmp2['key'] = tmp['roomType'];\n                        tmp2['text'] = tmp['description'];\n                        tmp2['value'] = tmp['roomType'];\n                        ids.push(tmp2);\n                    }\n                    this.setState({\n                        isLoadedParam: true,\n                        roomTypeOther: strs,\n                        roomTypeOtherIds: ids\n                    });\n                }, (error) => {\n                    this.setState({\n                        isLoadedParam: false,\n                    });\n                }\n            )\n    }\n\n    async UpdateCheckInRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, noteText) {\n        console.log(noteText);\n        let formatted_date = '';\n        if (isMobile.iOS()) {\n            formatted_date = checkinTime;\n        } else {\n            let current_datetime = checkinTime;\n            formatted_date = current_datetime.getFullYear() + \"-\" + (current_datetime.getMonth() + 1) + \"-\" + current_datetime.getDate() + \" \" + current_datetime.getHours() + \":\" + current_datetime.getMinutes() + \":\" + current_datetime.getSeconds();\n        }\n\n        let encoded = \"checkinTime=\" + formatted_date +\n            \"&roomClass=\" + roomClass +\n            \"&options=\" + options +\n            \"&noteText=\" + noteText +\n            \"&totalOptionPrice=\" + totalOptionPrice;\n\n        await fetch('https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=checkin&id=' + id, {\n            method: 'POST',\n            body: encoded,\n            headers: {\n                \"Content-type\": \"application/x-www-form-urlencoded\"\n            }\n        }).then(async function (response) {\n            let msgerr = '';\n            let isSuccess = false;\n            await response.json().then(function (data) {\n                console.log(data);\n                data['result'] == 'error' ? msgerr = JSON.stringify(data[\"error\"][\"message\"]) : isSuccess = true;\n            });\n\n            let stt = response.status;\n            if (stt == 200) {\n                if (!msgerr) {\n                    toast.success(\"Đặt phòng \" + roomId + \" thành công!\", {position: toast.POSITION.TOP_RIGHT});\n                } else {\n                    toast.error(\"Error:\" + JSON.stringify(msgerr));\n                }\n            } else {\n                toast.error(\"Something is wrong, please check log for detail!\");\n            }\n\n        }).then(() => {\n            this.handleClearSearching();\n        })\n    }\n\n    async CheckoutRoom(id, checkinTime, roomClass, options, totalOptionPrice, roomId, action, checkoutTime, totalRoomPrice, totalPrice, noteText) {\n        console.log(\"CheckoutRoom index page\");\n        console.log(id);\n        console.log(checkinTime);\n        console.log(roomClass);\n        console.log(options);\n        console.log(totalOptionPrice);\n        console.log(roomId);\n        console.log(action);\n        console.log(checkoutTime);\n        console.log(noteText);\n\n        let formatted_date = '';\n        let formattedcheckout_date = '';\n        if (isMobile.iOS()) {\n            formatted_date = checkinTime;\n            formattedcheckout_date = checkoutTime;\n        } else {\n            let current_datetime = checkinTime;\n            let current_Checkoutdatetime = checkoutTime;\n            formatted_date = current_datetime.getFullYear() + \"-\" + (current_datetime.getMonth() + 1) + \"-\" + current_datetime.getDate() + \" \" + current_datetime.getHours() + \":\" + current_datetime.getMinutes() + \":\" + current_datetime.getSeconds();\n            formattedcheckout_date = current_Checkoutdatetime.getFullYear() + \"-\" + (current_Checkoutdatetime.getMonth() + 1) + \"-\" + current_Checkoutdatetime.getDate() + \" \" + current_Checkoutdatetime.getHours() + \":\" + current_Checkoutdatetime.getMinutes() + \":\" + current_Checkoutdatetime.getSeconds();\n        }\n\n        // console.log(formatted_date);\n        // console.log(formattedcheckout_date);\n\n        let encoded = \"checkinTime=\" + formatted_date +\n            \"&roomClass=\" + roomClass +\n            \"&roomId=\" + roomId +\n            \"&options=\" + options +\n            \"&totalOptionPrice=\" + totalOptionPrice +\n            \"&totalRoomPrice=\" + totalRoomPrice +\n            \"&totalPrice=\" + totalPrice +\n            \"&noteText=\" + noteText +\n            \"&checkoutTime=\" + formattedcheckout_date;\n\n        if (action == \"checkout\") {\n            await fetch('https://script.google.com/macros/s/AKfycby1NCjArXNvliviV9Su8imyfVXsNTUL2memG4bxJhX4JTcyoXGr/exec?func=checkout&id=' + id, {\n                method: 'POST',\n                body: encoded,\n                headers: {\n                    \"Content-type\": \"application/x-www-form-urlencoded\"\n                }\n            }).then(async function (response) {\n                let msgerr = '';\n                let result = [];\n                await response.json().then(function (data) {\n                    data['result'] == 'error' ? msgerr = JSON.stringify(data[\"error\"][\"message\"]) : result = data['data'];\n                });\n\n                let stt = response.status;\n                if (stt == 200) {\n                    if (!msgerr) {\n                        toast.success(\"Thanh toán \" + roomId + \" thành công!\", {position: toast.POSITION.TOP_RIGHT});\n                    } else {\n                        toast.error(\"Error:\" + JSON.stringify(msgerr));\n                    }\n                } else {\n                    toast.error(\"Something is wrong, please check log for detail!\");\n                }\n\n            }).then(() => {\n                this.handleClearSearching();\n            })\n        }\n    }\n\n    handleClearSearching() {\n        this.setState({\n            roomidselected: '',\n            statusSelected: '',\n        });\n        this.getListRoomDetails();\n    }\n\n    handleChangeRoomIDSelect(event, val = null) {\n        if (val == null)\n            return;\n        this.setState({\n            roomidselected: val['value'],\n            statusSelected: ''\n        }, () => {\n            let filter = {'id': 'roomid', 'value': val['value']};\n            this.getListRoomDetails(filter);\n        });\n    }\n\n    handleChangeStatusIDSelect(event, val = null) {\n        if (val == null)\n            return;\n        this.setState({\n            statusSelected: val['value'],\n            roomidselected: ''\n        }, () => {\n            let filter = {'id': 'status', 'value': val['value']};\n            this.getListRoomDetails(filter);\n        });\n    }\n\n    renderSearchForm() {\n        if (this.state.isLoadedParam == false) {\n            return (<Segment>\n                <Dimmer active inverted>\n                    <Loader size='large'>Loading</Loader>\n                </Dimmer>\n                <Image src='images/loader.png'/>\n            </Segment>);\n        }\n\n        let listRoomIds = this.state.roomIds;\n        let listStatusIds = this.state.statusIds;\n        let styleDisable = {'pointerEvents': ''};\n        // debugger;\n        if (!this.state.isLoadedRooms || !this.state.isLoadedParam) {\n            styleDisable = {'pointerEvents': 'none'};\n        }\n        var newlistRoomIds = '';\n        if (listRoomIds.length > 0) {\n            listRoomIds.map((item) => {\n                let tmp = {\n                    title: item.key,\n                    description: item.text\n                }\n                item['title'] = item.key;\n                item['description'] = item.text;\n            });\n        }\n        return (\n            <Segment padded style={styleDisable}>\n                {/*{listRoomIds.length > 0 && <SearchingTab listRoomId={listRoomIds}/>}*/}\n                {/*<Input fluid icon='search plus' action='Search' placeholder='Search...'/>*/}\n                <Label attached='top left' onClick={this.handleClearSearching}>Refresh</Label>\n                <br/>\n                <Form.Group widths='equal'>\n                    <Form.Select\n                        fluid\n                        icon=''\n                        label='Lọc theo Phòng'\n                        value={this.state.roomidselected}\n                        onChange={this.handleChangeRoomIDSelect}\n                        options={listRoomIds}\n                        placeholder='RoomIDs'\n                    />\n                    <Form.Select\n                        fluid\n                        icon=''\n                        label='Lọc theo trạng thái'\n                        value={this.state.statusSelected}\n                        options={listStatusIds}\n                        onChange={this.handleChangeStatusIDSelect}\n                        placeholder='Status'\n                    />\n                </Form.Group>\n            </Segment>\n        );\n    }\n\n    renderListRooms() {\n        const {rooms, statusIds, roomTypeOtherIds, listoptionIds, listoption} = {...this.state};\n\n        if (this.state.isLoadedRooms == false) {\n            return (<Segment>\n                <Dimmer active inverted>\n                    <Loader size='large'>Loading</Loader>\n                </Dimmer>\n                <Image src='images/loader.png'/>\n            </Segment>);\n        }\n\n        return (\n            <Segment padded>\n                <Label attached='top'>Room List</Label>\n                <ListRoomRows roomsInfo={rooms}\n                              statusList={statusIds}\n                              roomTypeOther={roomTypeOtherIds}\n                              listoptionIds={listoptionIds}\n                              listoption={listoption}\n                              UpdateCheckInRoom={this.UpdateCheckInRoom}\n                              CheckoutRoom={this.CheckoutRoom}\n                />\n            </Segment>\n        );\n    }\n\n    async sha256(message) {\n        console.log(encrypt(\"bangth\"));\n    }\n\n\n    getIPAddress() {\n        // var https = require('https');\n        // var callback = function(err, ip){\n        //     if(err){\n        //         return console.log(err);\n        //     }\n        //     console.log('Our public IP is', ip);\n        //     // do something here with the IP address\n        // };\n        // https.get({\n        //     host: 'api.ipify.org',\n        // }, function(response) {\n        //     var ip = '';\n        //     response.on('data', function(d) {\n        //         ip += d;\n        //     });\n        //     response.on('end', function() {\n        //         if(ip){\n        //             callback(null, ip);\n        //         } else {\n        //             callback('could not get public ip address :(');\n        //         }\n        //     });\n        // });\n        // sessionStorage.setItem('key', 'value');\n\n        fetch(\"https://api.ipify.org/?format=json\", {\n            method: \"GET\",\n            // body: JSON.stringify(data),\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n        }).then(res => res.json())\n            .then(\n                (result) => {\n                    console.log(result);\n                    this.setState({\n                        ipadd: result[\"ip\"],\n                    })\n                }, (error) => {\n                    console.log(error);\n                }\n            )\n    }\n\n    componentDidMount() {\n        console.log(this.props.userInfo);\n        this.getIPAddress();\n        this.getListRoomDetails();\n        this.getListStatus();\n        this.getroomTypeOther();\n        this.getlistoption();\n    }\n\n    render() {\n        // console.log(this.state.statusIds);\n        // console.log(this.state.statusSelected);\n        return (\n            <div>\n                {/*<ToastContainer style={{fontSize: '20px', textAlign: 'center'}}/>*/}\n                <Form>\n                    {this.renderSearchForm()}\n                    {this.renderListRooms()}\n                </Form>\n                <br/><br/>\n            </div>\n        );\n    }\n}\n\nIndexPage.propTypes = {\n    userInfo: PropTypes.object\n}"]},"metadata":{},"sourceType":"module"}